(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"676":function(e,t,n){},"783":function(e,t,n){"use strict";n.r(t);var r,a=n(3),s=n(4),o=n(347),i=n(747),c=n(376),d=n(51),l=n(351),u=n(16),m=n(15),f=(n(676),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}()),p=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}var h="address_id";t.default=Object(d.b)(function(e){return{"address":e.address.current}},function(e){return{"onAddressChoose":function onAddressChoose(t){return e({"type":"address/choose","payload":t})}}})(r=function(e){function AddressIndex(e){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AddressIndex);var n,r,a=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AddressIndex.__proto__||Object.getPrototypeOf(AddressIndex)).call(this,e));return a.handleClickChecked=function(e){a.setState({"selectedId":e[h]}),a.props.onAddressChoose(e),setTimeout(function(){s.a.navigateBack()},700)},a.handleChangeDefault=(n=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return e.is_def=1,t.prev=1,t.next=4,m.a.member.addressCreateOrUpdate(e);case 4:e.address_id&&u.a.toast("修改成功"),setTimeout(function(){a.fetch()},700),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",!1);case 11:case"end":return t.stop()}},_callee,t,[[1,8]])})),function(e){return n.apply(this,arguments)}),a.handleClickToEdit=function(e){e.address_id?s.a.navigateTo({"url":"/pages/member/edit-address?address_id="+e.address_id}):s.a.navigateTo({"url":"/pages/member/edit-address"})},a.handleDelete=(r=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){return regeneratorRuntime.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.member.addressDelete(e.address_id);case 2:u.a.toast("删除成功"),setTimeout(function(){a.fetch()},700);case 4:case"end":return t.stop()}},_callee2,t)})),function(e){return r.apply(this,arguments)}),a.wxAddress=function(){s.a.navigateTo({"url":"/pages/member/edit-address?isWechatAddress=true"})},a.state={"list":[],"isPicker":!1,"selectedId":null},a}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AddressIndex,s["a"].Component),f(AddressIndex,[{"key":"componentDidMount","value":function componentDidMount(){}},{"key":"componentDidShow","value":function componentDidShow(){this.fetch()}},{"key":"fetch","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e,t,n;return regeneratorRuntime.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return this.$router.params.isPicker&&this.setState({"isPicker":!0}),Object(o.b)({"mask":!0}),r.next=4,m.a.member.addressList();case 4:e=r.sent,t=e.list,Object(o.a)(),n=null,n=this.props.address?this.props.address[h]:t.find(function(e){return e.is_def>0})||null,this.setState({"list":t,"selectedId":n});case 10:case"end":return r.stop()}},_callee3,this)}));return function fetch(){return e.apply(this,arguments)}}()},{"key":"render","value":function render(){var e=this,t=this.state,n=t.selectedId,r=(t.isItemChecked,t.isPicker),s=t.list;return a.l.createElement(i.a,{"className":"page-address-index"},null,a.l.createElement(i.a,{"className":"member-address-list"},s.map(function(t,s){return a.l.createElement(i.a,{"key":t[h],"className":"address-item"},r&&a.l.createElement(i.a,{"className":"address-item__check","onClick":e.handleClickChecked.bind(e,t)},t[h]===n?a.l.createElement(c.a,{"className":"in-icon in-icon-check address-item__checked"}):a.l.createElement(c.a,{"className":"address-item__unchecked"}," ")),a.l.createElement(i.a,{"className":"address-item__content"},a.l.createElement(i.a,{"className":"address-item__title"},a.l.createElement(c.a,{"className":"address-item__info"},t.username),a.l.createElement(c.a,{"className":"address-item__info"},t.telephone)),a.l.createElement(i.a,{"className":"address-item__detail"},t.province,t.city,t.county,t.adrdetail),a.l.createElement(i.a,{"className":"address-item__footer"},a.l.createElement(i.a,{"className":"address-item__footer_default","onClick":e.handleChangeDefault.bind(e,t)},t.is_def?a.l.createElement(c.a,{"className":"in-icon in-icon-check default__icon default__checked"}," "):a.l.createElement(c.a,{"className":"in-icon in-icon-check default__icon"}," "),a.l.createElement(c.a,{"className":"default-text"},"设为默认")),a.l.createElement(i.a,{"className":"address-item__footer_edit"},a.l.createElement(i.a,{"className":"footer-text","onClick":e.handleClickToEdit.bind(e,t)},a.l.createElement(c.a,{"className":"in-icon in-icon-edit footer-icon"}," "),a.l.createElement(c.a,null,"编辑")),a.l.createElement(i.a,{"className":"footer-text","onClick":e.handleDelete.bind(e,t)},a.l.createElement(c.a,{"className":"in-icon in-icon-trash footer-icon"}," "),a.l.createElement(c.a,null,"删除"))))))})),a.l.createElement(i.a,{"className":"member-address-add","onClick":this.handleClickToEdit.bind(this)},"添加新地址"),a.l.createElement(l.t,null))}},{"key":"componentDidHide","value":function componentDidHide(){p(AddressIndex.prototype.__proto__||Object.getPrototypeOf(AddressIndex.prototype),"componentDidHide",this)&&p(AddressIndex.prototype.__proto__||Object.getPrototypeOf(AddressIndex.prototype),"componentDidHide",this).call(this)}}]),AddressIndex}())||r}}]);