(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{"869":function(e,t,n){},"986":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(3),o=n(4),a=n(905),i=n(904),l=n(9),c=(n(869),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}()),s=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var u=function(e){function MarketingIndex(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MarketingIndex);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(MarketingIndex.__proto__||Object.getPrototypeOf(MarketingIndex)).call(this,e));return t.isButton=!0,t.state={"list":[],"rotateBg":0,"rotateGift":0,"rotate":0,"speed":1,"prizeIfon":null},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(MarketingIndex,o["a"].Component),c(MarketingIndex,[{"key":"componentWillMount","value":function componentWillMount(){this.fetch()}},{"key":"componentDidHide","value":function componentDidHide(){clearInterval(this.timerID)}},{"key":"fetch","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,n,r;return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,l.a.wheel.getTurntableconfig();case 2:e=o.sent,console.log(1,e),t=360/e.prizes.length/2,n=-(360/e.prizes.length-45),r=e.prizes.map(function(t,n){return t.rotate=360/e.prizes.length*n,t}),this.setState({"list":r,"rotateBg":t,"rotateGift":n});case 8:case"end":return o.stop()}},_callee,this)}));return function fetch(){return e.apply(this,arguments)}}()},{"key":"turntableRotate","value":function turntableRotate(){var e=this;clearInterval(this.timerID),this.timerID=setInterval(function(){var t=e.state,n=t.rotate;n+=t.speed,e.setState({"rotate":n})},0)}},{"key":"handleClickLotteryDraw","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,n,r=this;return regeneratorRuntime.wrap(function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(this.isButton){o.next=2;break}return o.abrupt("return");case 2:return this.isButton=!1,e=this.state.list,o.prev=4,o.next=7,l.a.wheel.getTurntable();case 7:t=o.sent,this.setState({"speed":20},function(){r.turntableRotate()}),n=e.filter(function(e){if(e.prize_name===t.prize_name)return e}),console.log(n[0].prize_name,n[0].rotate,n[0]),setTimeout(function(){r.isButton=!0,clearInterval(r.timerID),r.setState({"prizeIfon":t,"rotate":-n[0].rotate})},4e3),o.next=17;break;case 14:o.prev=14,o.t0=o.catch(4),this.isButton=!0;case 17:case"end":return o.stop()}},_callee2,this,[[4,14]])}));return function handleClickLotteryDraw(){return e.apply(this,arguments)}}()},{"key":"render","value":function render(){var e=this.state,t=e.list,n=e.rotateBg,o=e.rotateGift,l=e.rotate;e.prizeIfon;return r.l.createElement(a.a,{"className":"page-wheel-index"},r.l.createElement(a.a,{"className":"wheel"},r.l.createElement(a.a,{"className":"turntable","style":{"transform":"rotate("+l+"deg)"}},r.l.createElement(a.a,{"className":"turntable-bg","style":{"transform":"rotate("+n+"deg)"}},t.map(function(e,n){return r.l.createElement(a.a,{"key":n,"style":{"transform":"rotate("+360/t.length*(n+1)+"deg)"}})})),r.l.createElement(a.a,{"className":"turntable-gift","style":{"transform":"rotate("+o+"deg)"}},t.map(function(e,n){return r.l.createElement(a.a,{"key":n,"style":{"transform":"rotate("+360/t.length*(n+1)+"deg)"}},r.l.createElement(a.a,{"className":"div-text"},r.l.createElement(a.a,null,e.prize_name),r.l.createElement(i.a,{"src":e.prize_image})))}))),r.l.createElement(a.a,{"className":"wheel-pointer"},r.l.createElement(i.a,{"onClick":this.handleClickLotteryDraw.bind(this),"mode":"widthFix","src":"/assets/imgs/dial_pointer.png"}))))}},{"key":"componentDidMount","value":function componentDidMount(){s(MarketingIndex.prototype.__proto__||Object.getPrototypeOf(MarketingIndex.prototype),"componentDidMount",this)&&s(MarketingIndex.prototype.__proto__||Object.getPrototypeOf(MarketingIndex.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){s(MarketingIndex.prototype.__proto__||Object.getPrototypeOf(MarketingIndex.prototype),"componentDidShow",this)&&s(MarketingIndex.prototype.__proto__||Object.getPrototypeOf(MarketingIndex.prototype),"componentDidShow",this).call(this)}}]),MarketingIndex}()}}]);