(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{"353":function(e,t,n){"use strict";var r=n(16),o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var i={"WILL_MOUNT":0,"DID_MOUNT":1,"DID_SHOW":2};function withLogin(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.WILL_MOUNT;return void 0!==i[t]?(console.warn("lifeCycle is not in defined types: "+t),function(e){return e}):function withLoginComponent(e){return function(n){function WithLogin(e){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WithLogin),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(WithLogin.__proto__||Object.getPrototypeOf(WithLogin)).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WithLogin,e),o(WithLogin,[{"key":"componentWillMount","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(t!==i.WILL_MOUNT){n.next=9;break}return n.next=3,this.$__autoLogin();case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentWillMount",this)&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentWillMount",this).call(this),n.next=13;break;case 9:return n.next=11,this.$__autoLoginDone();case 11:e=n.sent,a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentWillMount",this)&&e&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentWillMount",this).call(this);case 13:case"end":return n.stop()}},_callee,this)}));return function componentWillMount(){return e.apply(this,arguments)}}()},{"key":"componentDidMount","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e;return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(t!==i.DID_MOUNT){n.next=9;break}return n.next=3,this.$__autoLogin();case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidMount",this)&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidMount",this).call(this),n.next=13;break;case 9:return n.next=11,this.$__autoLoginDone();case 11:e=n.sent,a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidMount",this)&&e&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidMount",this).call(this);case 13:case"end":return n.stop()}},_callee2,this)}));return function componentDidMount(){return e.apply(this,arguments)}}()},{"key":"componentDidShow","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e;return regeneratorRuntime.wrap(function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:if(t!==i.DID_SHOW){n.next=9;break}return n.next=3,this.$__autoLogin();case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidShow",this)&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidShow",this).call(this),n.next=13;break;case 9:return n.next=11,this.$__autoLoginDone();case 11:e=n.sent,a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidShow",this)&&e&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidShow",this).call(this);case 13:case"end":return n.stop()}},_callee3,this)}));return function componentDidShow(){return e.apply(this,arguments)}}()},{"key":"$__autoLogin","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var e;return regeneratorRuntime.wrap(function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return this.$__autoLogin_state="pending",e=void 0,t.prev=2,t.next=5,r.a.autoLogin(this);case 5:e=t.sent,this.$__autoLogin_state=e?"success":"fail",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),this.$__autoLogin_state="fail";case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}},_callee4,this,[[2,9]])}));return function $__autoLogin(){return e.apply(this,arguments)}}()},{"key":"$__autoLoginDone","value":function $__autoLoginDone(){var e=void 0,t=8,n=this;return new Promise(function(r){!function next(){e&&clearTimeout(e),e=setTimeout(function(){var o=n.$__autoLogin_state;"success"===o||"fail"===o?(clearTimeout(e),e=null,r("success"===o)):t>0?(t--,next()):r(!1)},70)}()})}}]),WithLogin}()}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function withPager(e){var t,n;return t=function(t){function WithPagerComponent(e){!function withPager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WithPagerComponent);var t=function withPager_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(WithPagerComponent.__proto__||Object.getPrototypeOf(WithPagerComponent)).call(this,e));n.call(t);var r=e||{},o=r.pageSize,a=void 0===o?10:o,i=r.pageNo,s=void 0===i?0:i,c=r.pageTotal,l={"hasNext":!0,"isLoading":!1,"total":void 0===c?0:c,"page_no":s,"page_size":a};return t.state.page=l,t}return function withPager_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WithPagerComponent,e),c(WithPagerComponent,[{"key":"resetPage","value":function resetPage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=s({},this.state.page||{},{"page_no":0,"total":0,"isLoading":!1,"hasNext":!0});this.setState({"page":t},e)}}]),WithPagerComponent}(),n=function _initialiseProps(){var e=this;this.nextPage=function withPager_asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(){var t,n,r,o,a,i;return regeneratorRuntime.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if((t=e.state.page).hasNext&&!t.isLoading){c.next=3;break}return c.abrupt("return");case 3:return t.isLoading=!0,e.setState({"page":t}),n=t.page_no,r=t.page_size,o=n+1,c.next=9,e.fetch({"page_no":o,"page_size":r});case 9:a=c.sent,(!(i=a.total)||o>=Math.ceil(+i/r))&&(t.hasNext=!1),e.setState({"page":s({},t,{"total":i,"page_no":o,"isLoading":!1})});case 13:case"end":return c.stop()}},_callee,e)}))},t}var l=n(13),u=n(50),p=n.n(u),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function withBackToTop(e){return function(t){function WithBackToTopComponent(e){!function withBackToTop_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WithBackToTopComponent);var t=function withBackToTop_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(WithBackToTopComponent.__proto__||Object.getPrototypeOf(WithBackToTopComponent)).call(this,e));return t.scrollBackToTop=function(){t.setState({"scrollTop":1},function(){})},t.handleScroll=p()(function(e){var n=e.detail,r=n.scrollTop;n.scrollHeight<600||(r>300&&!t.state.showBackToTop?(l.n.debug("[BackToTop] showBackToTop, scrollTop: "+r),t.setState({"showBackToTop":!0})):t.state.showBackToTop&&r<=300&&(l.n.debug("[BackToTop] hideBackToTop, scrollTop: "+r),t.setState({"showBackToTop":!1})))},70),t.state=f({},t.state,{"scrollTop":null,"showBackToTop":!1}),t}return function withBackToTop_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WithBackToTopComponent,e),WithBackToTopComponent}()}n.d(t,"b",function(){return withLogin}),n.d(t,"c",function(){return withPager}),n.d(t,"a",function(){return withBackToTop})},"362":function(e,t,n){"use strict";var r=n(3),o=n(4),a=n(747),i=n(456),s=n(553),c=n(350),l=n.n(c),u=n(49),p=n.n(u),f=n(349),d=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var m=function(e){function AtLoading(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtLoading),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtLoading.__proto__||Object.getPrototypeOf(AtLoading)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtLoading,f["a"]),d(AtLoading,[{"key":"render","value":function render(){var e=this.props,t=e.color,n=e.size,i={"width":n?""+o.a.pxTransform(parseInt(n)):"","height":n?""+o.a.pxTransform(parseInt(n)):""},s={"border":t?"1px solid "+t:"","border-color":t?t+" transparent transparent transparent":""},c=Object.assign({},s,i);return r.l.createElement(a.a,{"className":"at-loading","style":i},r.l.createElement(a.a,{"className":"at-loading__ring","style":c}),r.l.createElement(a.a,{"className":"at-loading__ring","style":c}),r.l.createElement(a.a,{"className":"at-loading__ring","style":c}))}}]),AtLoading}();m.defaultProps={"size":0,"color":""},m.propTypes={"size":l.a.oneOfType([l.a.string,l.a.number]),"color":l.a.oneOfType([l.a.string,l.a.number])},n.d(t,"a",function(){return b});var h=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}var _={"normal":"normal","small":"small"},y={"primary":"primary","secondary":"secondary"},b=function(e){function AtButton(){!function button_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtButton);var e=function button_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtButton.__proto__||Object.getPrototypeOf(AtButton)).apply(this,arguments));return e.state={"isWEB":o.a.getEnv()===o.a.ENV_TYPE.WEB,"isWEAPP":o.a.getEnv()===o.a.ENV_TYPE.WEAPP,"isALIPAY":o.a.getEnv()===o.a.ENV_TYPE.ALIPAY},e}return function button_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtButton,f["a"]),h(AtButton,[{"key":"onClick","value":function onClick(){var e;this.props.disabled||this.props.onClick&&(e=this.props).onClick.apply(e,arguments)}},{"key":"onGetUserInfo","value":function onGetUserInfo(){var e;this.props.onGetUserInfo&&(e=this.props).onGetUserInfo.apply(e,arguments)}},{"key":"onContact","value":function onContact(){var e;this.props.onContact&&(e=this.props).onContact.apply(e,arguments)}},{"key":"onGetPhoneNumber","value":function onGetPhoneNumber(){var e;this.props.onGetPhoneNumber&&(e=this.props).onGetPhoneNumber.apply(e,arguments)}},{"key":"onError","value":function onError(){var e;this.props.onError&&(e=this.props).onError.apply(e,arguments)}},{"key":"onOpenSetting","value":function onOpenSetting(){var e;this.props.onOpenSetting&&(e=this.props).onOpenSetting.apply(e,arguments)}},{"key":"onSumit","value":function onSumit(){this.state.isWEAPP&&this.$scope.triggerEvent("submit",arguments[0].detail,{"bubbles":!0,"composed":!0})}},{"key":"onReset","value":function onReset(){this.state.isWEAPP&&this.$scope.triggerEvent("reset",arguments[0].detail,{"bubbles":!0,"composed":!0})}},{"key":"render","value":function render(){var e,t=this.props,n=t.size,o=void 0===n?"normal":n,c=t.type,l=void 0===c?"":c,u=t.circle,f=t.full,d=t.loading,h=t.disabled,b=t.customStyle,g=t.formType,v=t.openType,O=t.lang,E=t.sessionFrom,w=t.sendMessageTitle,P=t.sendMessagePath,k=t.sendMessageImg,T=t.showMessageCard,C=t.appParameter,L=this.state,j=L.isWEAPP,N=L.isALIPAY,x=["at-button"],I=(_defineProperty(e={},"at-button--"+_[o],_[o]),_defineProperty(e,"at-button--disabled",h),_defineProperty(e,"at-button--"+l,y[l]),_defineProperty(e,"at-button--circle",u),_defineProperty(e,"at-button--full",f),e),W="primary"===l?"#fff":"",R="small"===o?"30":0,S=void 0;d&&(S=r.l.createElement(a.a,{"className":"at-button__icon"},r.l.createElement(m,{"color":W,"size":R})),x.push("at-button--icon"));var A=r.l.createElement(i.a,{"className":"at-button__wxbutton","formType":g,"openType":v,"lang":O,"sessionFrom":E,"sendMessageTitle":w,"sendMessagePath":P,"sendMessageImg":k,"showMessageCard":T,"appParameter":C,"onGetUserInfo":this.onGetUserInfo.bind(this),"onGetPhoneNumber":this.onGetPhoneNumber.bind(this),"onOpenSetting":this.onOpenSetting.bind(this),"onError":this.onError.bind(this),"onContact":this.onContact.bind(this)});return r.l.createElement(a.a,{"className":p()(x,I,this.props.className),"style":b,"onClick":this.onClick.bind(this)},j&&!h&&r.l.createElement(s.a,{"reportSubmit":!0,"onSubmit":this.onSumit.bind(this),"onReset":this.onReset.bind(this)},A),N&&!h&&A,S,r.l.createElement(a.a,{"className":"at-button__text"},this.props.children))}}]),AtButton}();b.defaultProps={"size":"normal","type":"","circle":!1,"full":!1,"loading":!1,"disabled":!1,"customStyle":{},"onClick":function onClick(){},"formType":"","openType":"","lang":"en","sessionFrom":"","sendMessageTitle":"","sendMessagePath":"","sendMessageImg":"","showMessageCard":!1,"appParameter":"","onGetUserInfo":function onGetUserInfo(){},"onContact":function onContact(){},"onGetPhoneNumber":function onGetPhoneNumber(){},"onError":function onError(){},"onOpenSetting":function onOpenSetting(){}},b.propTypes={"size":l.a.oneOf(["normal","small"]),"type":l.a.oneOf(["primary","secondary",""]),"circle":l.a.bool,"full":l.a.bool,"loading":l.a.bool,"disabled":l.a.bool,"onClick":l.a.func,"customStyle":l.a.oneOfType([l.a.object,l.a.string]),"formType":l.a.oneOf(["submit","reset",""]),"openType":l.a.oneOf(["contact","share","getUserInfo","getPhoneNumber","launchApp","openSetting","feedback","getRealnameAuthInfo",""]),"lang":l.a.string,"sessionFrom":l.a.string,"sendMessageTitle":l.a.string,"sendMessagePath":l.a.string,"sendMessageImg":l.a.string,"showMessageCard":l.a.bool,"appParameter":l.a.string,"onGetUserInfo":l.a.func,"onContact":l.a.func,"onGetPhoneNumber":l.a.func,"onError":l.a.func,"onOpenSetting":l.a.func}},"450":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r,o,a=n(3),i=n(4),s=n(747),c=n(376),l=n(351),u=(n(451),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var p=(o=r=function(e){function OrderItem(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderItem),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(OrderItem.__proto__||Object.getPrototypeOf(OrderItem)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(OrderItem,i["a"].Component),u(OrderItem,[{"key":"render","value":function render(){var e=this.props,t=e.info,n=e.onClick,r=e.payType,o=e.showExtra,i=e.customFooter;if(!t)return null;var u=t.pic_path?t.pic_path:Array.isArray(t.pics)?t.pics[0]:t.pics;return a.l.createElement(s.a,{"className":"order-item","onClick":n},a.l.createElement(s.a,{"className":"order-item__hd"},a.l.createElement(l.m,{"img-class":"order-item__img","src":u,"mode":"aspectFill","width":"100","lazyLoad":!0})),a.l.createElement(s.a,{"className":"order-item__bd"},a.l.createElement(c.a,{"className":"order-item__title"},t.title),this.props.renderDesc,o&&a.l.createElement(s.a,{"className":"order-item__extra"},a.l.createElement(c.a,{"className":"order-item__desc"},t.goods_props),t.num&&a.l.createElement(c.a,{"className":"order-item__num"},"数量：",t.num))),i?this.props.renderFooter:a.l.createElement(s.a,{"className":"order-item__ft"},"point"===r?a.l.createElement(l.l,{"className":"order-item__price","appendText":"积分","noSymbol":!0,"noDecimal":!0,"value":t.point}):a.l.createElement(l.l,{"className":"order-item__price","value":t.price}),a.l.createElement(c.a,{"className":"order-item__pay-type"},"dhpoint"===r?"积分支付":"微信支付")))}}]),OrderItem}(),r.defaultProps={"onClick":function onClick(){},"payType":"","showExtra":!0,"info":null},r.options={"addGlobalClass":!0},o)},"451":function(e,t,n){},"453":function(e,t,n){var r=n(213),o=n(214),a=n(53);e.exports=function mapKeys(e,t){var n={};return t=a(t,3),o(e,function(e,o,a){r(n,t(e,o,a),e)}),n}},"458":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r,o,a=n(3),i=n(4),s=n(747),c=n(376),l=n(362),u=n(351),p=n(13),f=n(450),d=(n(459),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var m=(o=r=function(e){function TradeItem(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TradeItem),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(TradeItem.__proto__||Object.getPrototypeOf(TradeItem)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(TradeItem,i["a"].Component),d(TradeItem,[{"key":"handleClickBtn","value":function handleClickBtn(e){var t=this.props.info;this.props.onClickBtn&&this.props.onClickBtn(e,t)}},{"key":"render","value":function render(){var e=this.props,t=e.customHeader,n=e.customFooter,r=e.noHeader,o=e.onClick,i=e.info,d=e.payType,m=e.showActions;return i?a.l.createElement(s.a,{"className":"trade-item"},!r&&(t?a.l.createElement(s.a,{"className":"trade-item__hd"},this.props.renderHeader):a.l.createElement(s.a,{"className":"trade-item__hd"},a.l.createElement(c.a,{"className":"time"},i.create_date),a.l.createElement(c.a,{"className":"trade-item__shop"},"订单号：",i.tid))),a.l.createElement(s.a,{"className":"trade-item__bd","onClick":o},i.order.map(function(e,t){return a.l.createElement(f.a,{"key":t,"info":e,"payType":d})}),this.props.customRender?this.props.customRender:"point"===d?a.l.createElement(s.a,{"className":"trade-item__total"},"共",i.totalItems,"件商品 合计: ",a.l.createElement(u.l,{"appendText":"积分","noSymbol":!0,"noDecimal":!0,"value":i.point})):"dhpoint"===d?a.l.createElement(s.a,{"className":"trade-item__total"},"共",i.totalItems,"件商品 合计: ",a.l.createElement(u.l,{"appendText":"积分","noSymbol":!0,"noDecimal":!0,"value":i.total_fee})):a.l.createElement(s.a,{"className":"trade-item__total"},"共",i.totalItems,"件商品 合计: ",a.l.createElement(u.l,{"value":i.payment}))),n&&a.l.createElement(s.a,{"className":"trade-item__ft"},this.props.renderFooter),!n&&"WAIT_BUYER_PAY"===i.status&&a.l.createElement(s.a,{"className":"trade-item__ft"},a.l.createElement(s.a,{"className":"trade-item__ft-actions"}),a.l.createElement(s.a,{"className":"trade-item__ft-bd"},a.l.createElement(c.a,{"className":"trade-item__status"},i.status_desc),"PAYED"===i.order_status_des||"NOTPAY"===i.order_status_des?a.l.createElement(l.a,{"circle":!0,"type":"secondary","size":"small","onClick":this.handleClickBtn.bind(this,"cancel")},"取消订单"):null,a.l.createElement(l.a,{"circle":!0,"type":"primary","size":"small","onClick":this.handleClickBtn.bind(this,"pay")},"立即支付"))),!n&&"WAIT_SELLER_SEND_GOODS"===i.status&&a.l.createElement(s.a,{"className":"trade-item__ft"},a.l.createElement(s.a,{"className":"trade-item__ft-actions"}),a.l.createElement(s.a,{"className":"trade-item__ft-bd"},a.l.createElement(c.a,{"className":"trade-item__status"},i.status_desc),"PAYED"===i.order_status_des||"NOTPAY"===i.order_status_des?a.l.createElement(l.a,{"circle":!0,"type":"secondary","size":"small","onClick":this.handleClickBtn.bind(this,"cancel")},"取消订单"):null,a.l.createElement(l.a,{"circle":!0,"type":"primary","size":"small","onClick":this.handleClickBtn.bind(this,"detail")},"订单详情"))),!n&&"TRADE_CLOSED"===i.status&&a.l.createElement(s.a,{"className":"trade-item__ft"},a.l.createElement(s.a,{"className":"trade-item__ft-actions"}),a.l.createElement(s.a,{"className":"trade-item__ft-bd"},a.l.createElement(c.a,{"className":"trade-item__status"},i.status_desc),a.l.createElement(l.a,{"circle":!0,"type":"primary","size":"small","onClick":this.handleClickBtn.bind(this,"detail")},"订单详情"))),!n&&"WAIT_BUYER_CONFIRM_GOODS"===i.status&&a.l.createElement(s.a,{"className":"trade-item__ft"},a.l.createElement(s.a,{"className":"trade-item__ft-actions"},a.l.createElement(c.a,{"className":"trade-item__acts","onClick":this.props.onActionBtnClick.bind(this)},"更多"),a.l.createElement(s.a,{"className":Object(p.d)("trade-item__dropdown",{"is-active":m})},a.l.createElement(c.a,{"className":"trade-item__dropdown-item","onClick":this.props.onActionClick.bind(this,"confirm-receive")},"确认收货"),a.l.createElement(c.a,{"className":"trade-item__dropdown-item","onClick":this.props.onActionClick.bind(this,"view-express")},"查看物流"))),a.l.createElement(s.a,{"className":"trade-item__ft-bd"},a.l.createElement(c.a,{"className":"trade-item__status"},i.status_desc),a.l.createElement(l.a,{"circle":!0,"type":"secondary","size":"small","onClick":this.handleClickBtn.bind(this,"confirm")},"确认收货"),a.l.createElement(l.a,{"circle":!0,"type":"primary","size":"small","onClick":this.handleClickBtn.bind(this,"detail")},"订单详情"))),!n&&"WAIT_RATE"===i.status&&a.l.createElement(s.a,{"className":"trade-item__ft"},a.l.createElement(s.a,{"className":"trade-item__ft-actions"},a.l.createElement(c.a,{"className":"trade-item__acts"},"更多"),a.l.createElement(s.a,{"className":Object(p.d)("trade-item__dropdown",{"is-active":m})},a.l.createElement(c.a,{"className":"trade-item__dropdown-item","onClick":this.props.onActionClick.bind(this,"rate")},"评价|晒单"),a.l.createElement(c.a,{"className":"trade-item__dropdown-item","onClick":this.props.onActionClick.bind(this,"rebuy")},"再次购买"))),a.l.createElement(s.a,{"className":"trade-item__ft-bd"},a.l.createElement(c.a,{"className":"trade-item__status"},i.status_desc),a.l.createElement(l.a,{"circle":!0,"type":"secondary","size":"small","onClick":this.handleClickBtn.bind(this,"rate")},"评价"),a.l.createElement(l.a,{"circle":!0,"type":"primary","size":"small","onClick":this.handleClickBtn.bind(this,"detail")},"订单详情")))):null}}]),TradeItem}(),r.options={"addGlobalClass":!0},r.defaultProps={"customHeader":!1,"customFooter":!1,"customRender":!1,"noHeader":!1,"showActions":!1,"payType":"","info":null,"onClickBtn":function onClickBtn(){},"onClick":function onClick(){}},o)},"459":function(e,t,n){},"499":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"c",function(){return i});var r=6e4,o={"UNSENT":0,"OPENED":1,"HEADERS_RECEIVED":2,"LOADING":3,"DONE":4},a=function setHeader(e,t){var n=void 0;for(n in t)e.setRequestHeader(n,t[n])},i=function convertObjectUrlToBlob(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(e){200===this.status?t(this.response):n({"status":this.status})},r.send()})}},"740":function(e,t,n){},"829":function(e,t,n){"use strict";n.r(t);var r,o,a=n(3),i=n(4),s=n(346),c=n(347),l=n(1),u=n(499),p=function downloadFile(e){var t=e.url,n=e.header,r=e.success,o=e.fail,a=e.complete,i=void 0,s=new Promise(function(e,s){i=function createDownloadTask(e){var t=e.url,n=e.header,r=e.success,o=e.error,a=void 0,i="downloadFile",s=new XMLHttpRequest,c={"headersReceived":Object(l.a)(),"progressUpdate":Object(l.a)()};s.open("GET",t,!0),s.responseType="blob",Object(u.d)(s,n),s.onprogress=function(e){var t=e.loaded,n=e.total;c.progressUpdate.trigger({"progress":Math.round(t/n*100),"totalBytesWritten":t,"totalBytesExpectedToWrite":n})},s.onreadystatechange=function(){s.readyState===u.b.HEADERS_RECEIVED&&c.headersReceived.trigger({"header":s.getAllResponseHeaders()})},s.onload=function(){var e=s.response,t=s.status;r({"errMsg":i+":ok","statusCode":t,"tempFilePath":window.URL.createObjectURL(e)})},s.onabort=function(){clearTimeout(a),o({"errMsg":i+":fail abort"})},s.onerror=function(e){o({"errMsg":i+":fail "+e.message})},function send(){s.send(),a=setTimeout(function(){s.onabort=null,s.onload=null,s.onprogress=null,s.onreadystatechange=null,s.onerror=null,p(),o({"errMsg":i+":fail timeout"})},u.a)}();var p=function abort(){s.abort()},f=c.headersReceived.add,d=c.headersReceived.remove,m=c.progressUpdate.add,h=c.progressUpdate.remove;return{"abort":p,"onHeadersReceived":f,"offHeadersReceived":d,"onProgressUpdate":m,"offProgressUpdate":h}}({"url":t,"header":n,"success":function success(t){r&&r(t),a&&a(),e(t)},"error":function error(e){o&&o(e),a&&a(),s(e)}})});return s.headersReceive=i.onHeadersReceived,s.progress=i.onProgressUpdate,s.abort=i.abort,s},f=n(747),d=n(748),m=n(376),h=n(453),_=n.n(h),y=n(351),b=n(15),g=n(353),v=n(13),O=n(458),E=(n(740),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),w=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),P=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}t.default=(r=Object(g.b)(),Object(g.c)(o=r(o=function(e){function InvoiceList(e){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,InvoiceList);var n,r,o=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(InvoiceList.__proto__||Object.getPrototypeOf(InvoiceList)).call(this,e));return o.handleClickItem=function(e){var t=e.tid;i.a.navigateTo({"url":"/pages/trade/detail?id="+t})},o.handleClickItemBtn=(n=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,n){var r;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:r=E({},n),t.t0=e,t.next="add-card"===t.t0?4:"open-card"===t.t0?7:10;break;case 4:return t.next=6,Object(s.a)(r);case 6:return t.abrupt("break",10);case 7:return t.next=9,Object(s.h)(r);case 9:return t.abrupt("break",10);case 10:case"end":return t.stop()}},_callee,t)})),function(e,t){return n.apply(this,arguments)}),o.handleClickBtn=(r=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var n;return regeneratorRuntime.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:"add-card"===e&&(n=function showErr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"下载失败";return Object(c.d)({"icon":"none","title":e})},Object(v.a)("writePhotosAlbum",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,n;return regeneratorRuntime.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({"url":"http://mmbiz.qpic.cn/mmbiz_png/1nDJByqmW2drJSibeWL0bEib2rj4OxG6ep2Y8VggMzP2pSSHVGNW3eIEy9BUiaMfxD4MrWUQ2oVaNEZs4VfQg8tSw/0?wx_fmt=png"});case 2:return e=t.sent,n=e.tempFilePath,t.prev=4,t.next=7,Object(s.j)({"filePath":n});case 7:Object(c.d)({"icon":"success","title":"成功保存照片"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.log(t.t0);case 13:case"end":return t.stop()}},_callee2,t,[[4,10]])})),function(){n()}));case 1:case"end":return r.stop()}},_callee3,t)})),function(e){return r.apply(this,arguments)}),o.state=E({},o.state,{"list":[]}),o}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(InvoiceList,i["a"].Component),w(InvoiceList,[{"key":"componentDidMount","value":function componentDidMount(){this.nextPage()}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"fetch","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e){var t,n,r,o;return regeneratorRuntime.wrap(function _callee4$(a){for(;;)switch(a.prev=a.next){case 0:return e=_()(E({},e),function(e,t){return"page_no"===t?"page":"page_size"===t?"pageSize":t}),a.next=3,b.a.trade.involiceList(e);case 3:return t=a.sent,n=t.list,r=t.total_count,o=Object(v.q)(n,{"tid":"order_id","status_desc":"order_status_msg","status":function status(e){var t=e.order_status;return Object(v.r)(t)},"totalItems":function totalItems(e){return e.items.reduce(function(e,t){return+t.num+e},0)},"payment":function payment(e){return(e.total_fee/100).toFixed(2)},"pay_type":"pay_type","point":"point","create_date":"create_date","order":function order(e){var t=e.items;return Object(v.q)(t,{"order_id":"order_id","item_id":"item_id","pic_path":"pic","title":"item_name","price":function price(e){return(+e.item_fee/100).toFixed(2)},"point":"item_point","num":"num"})}}),v.n.debug("[trade list] list fetched and processed: ",o),this.setState({"list":[].concat(_toConsumableArray(this.state.list),_toConsumableArray(o))}),a.abrupt("return",{"total":r});case 10:case"end":return a.stop()}},_callee4,this)}));return function fetch(t){return e.apply(this,arguments)}}()},{"key":"render","value":function render(){var e=this,t=this.state,n=t.list,r=t.page;return a.l.createElement(f.a,{"className":"page-trade-list page-invoice-list"},a.l.createElement(y.k,{"title":"发票管理","leftIconType":"chevron-left","fixed":"true"}),a.l.createElement(d.a,{"scrollY":!0,"className":"trade-list__scroll","onScrollToLower":this.nextPage},n.map(function(t){return a.l.createElement(O.a,{"customFooter":!0,"payType":t.pay_type,"key":t.tid,"info":t,"onClick":e.handleClickItem.bind(e,t),"onClickBtn":e.handleClickItemBtn,"renderFooter":a.l.createElement(f.a,{"className":"trade-item__ft"},a.l.createElement(m.a,{"className":"trade-item__status"},"已开票"))})}),r.isLoading&&a.l.createElement(y.j,null,"正在加载..."),!r.isLoading&&!r.hasNext&&!n.length&&a.l.createElement(y.s,{"img":"trades_empty.png"},"赶快去添加吧~")))}},{"key":"componentDidShow","value":function componentDidShow(){P(InvoiceList.prototype.__proto__||Object.getPrototypeOf(InvoiceList.prototype),"componentDidShow",this)&&P(InvoiceList.prototype.__proto__||Object.getPrototypeOf(InvoiceList.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){P(InvoiceList.prototype.__proto__||Object.getPrototypeOf(InvoiceList.prototype),"componentDidHide",this)&&P(InvoiceList.prototype.__proto__||Object.getPrototypeOf(InvoiceList.prototype),"componentDidHide",this).call(this)}}]),InvoiceList}())||o)||o)}}]);