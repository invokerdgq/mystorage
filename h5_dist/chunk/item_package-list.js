(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"353":function(e,t,n){"use strict";var o=n(16),r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var i={"WILL_MOUNT":0,"DID_MOUNT":1,"DID_SHOW":2};function withLogin(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.WILL_MOUNT;return void 0!==i[t]?(console.warn("lifeCycle is not in defined types: "+t),function(e){return e}):function withLoginComponent(e){return function(n){function WithLogin(e){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WithLogin),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(WithLogin.__proto__||Object.getPrototypeOf(WithLogin)).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WithLogin,e),r(WithLogin,[{"key":"componentWillMount","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(t!==i.WILL_MOUNT){n.next=9;break}return n.next=3,this.$__autoLogin();case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentWillMount",this)&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentWillMount",this).call(this),n.next=13;break;case 9:return n.next=11,this.$__autoLoginDone();case 11:e=n.sent,a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentWillMount",this)&&e&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentWillMount",this).call(this);case 13:case"end":return n.stop()}},_callee,this)}));return function componentWillMount(){return e.apply(this,arguments)}}()},{"key":"componentDidMount","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e;return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(t!==i.DID_MOUNT){n.next=9;break}return n.next=3,this.$__autoLogin();case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidMount",this)&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidMount",this).call(this),n.next=13;break;case 9:return n.next=11,this.$__autoLoginDone();case 11:e=n.sent,a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidMount",this)&&e&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidMount",this).call(this);case 13:case"end":return n.stop()}},_callee2,this)}));return function componentDidMount(){return e.apply(this,arguments)}}()},{"key":"componentDidShow","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e;return regeneratorRuntime.wrap(function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:if(t!==i.DID_SHOW){n.next=9;break}return n.next=3,this.$__autoLogin();case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidShow",this)&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidShow",this).call(this),n.next=13;break;case 9:return n.next=11,this.$__autoLoginDone();case 11:e=n.sent,a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidShow",this)&&e&&a(WithLogin.prototype.__proto__||Object.getPrototypeOf(WithLogin.prototype),"componentDidShow",this).call(this);case 13:case"end":return n.stop()}},_callee3,this)}));return function componentDidShow(){return e.apply(this,arguments)}}()},{"key":"$__autoLogin","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var e;return regeneratorRuntime.wrap(function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return this.$__autoLogin_state="pending",e=void 0,t.prev=2,t.next=5,o.a.autoLogin(this);case 5:e=t.sent,this.$__autoLogin_state=e?"success":"fail",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),this.$__autoLogin_state="fail";case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}},_callee4,this,[[2,9]])}));return function $__autoLogin(){return e.apply(this,arguments)}}()},{"key":"$__autoLoginDone","value":function $__autoLoginDone(){var e=void 0,t=8,n=this;return new Promise(function(o){!function next(){e&&clearTimeout(e),e=setTimeout(function(){var r=n.$__autoLogin_state;"success"===r||"fail"===r?(clearTimeout(e),e=null,o("success"===r)):t>0?(t--,next()):o(!1)},70)}()})}}]),WithLogin}()}}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function withPager(e){var t,n;return t=function(t){function WithPagerComponent(e){!function withPager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WithPagerComponent);var t=function withPager_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(WithPagerComponent.__proto__||Object.getPrototypeOf(WithPagerComponent)).call(this,e));n.call(t);var o=e||{},r=o.pageSize,a=void 0===r?10:r,i=o.pageNo,c=void 0===i?0:i,s=o.pageTotal,u={"hasNext":!0,"isLoading":!1,"total":void 0===s?0:s,"page_no":c,"page_size":a};return t.state.page=u,t}return function withPager_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WithPagerComponent,e),s(WithPagerComponent,[{"key":"resetPage","value":function resetPage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=c({},this.state.page||{},{"page_no":0,"total":0,"isLoading":!1,"hasNext":!0});this.setState({"page":t},e)}}]),WithPagerComponent}(),n=function _initialiseProps(){var e=this;this.nextPage=function withPager_asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(){var t,n,o,r,a,i;return regeneratorRuntime.wrap(function _callee$(s){for(;;)switch(s.prev=s.next){case 0:if((t=e.state.page).hasNext&&!t.isLoading){s.next=3;break}return s.abrupt("return");case 3:return t.isLoading=!0,e.setState({"page":t}),n=t.page_no,o=t.page_size,r=n+1,s.next=9,e.fetch({"page_no":r,"page_size":o});case 9:a=s.sent,(!(i=a.total)||r>=Math.ceil(+i/o))&&(t.hasNext=!1),e.setState({"page":c({},t,{"total":i,"page_no":r,"isLoading":!1})});case 13:case"end":return s.stop()}},_callee,e)}))},t}var u=n(13),l=n(50),p=n.n(l),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function withBackToTop(e){return function(t){function WithBackToTopComponent(e){!function withBackToTop_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WithBackToTopComponent);var t=function withBackToTop_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(WithBackToTopComponent.__proto__||Object.getPrototypeOf(WithBackToTopComponent)).call(this,e));return t.scrollBackToTop=function(){t.setState({"scrollTop":1},function(){})},t.handleScroll=p()(function(e){var n=e.detail,o=n.scrollTop;n.scrollHeight<600||(o>300&&!t.state.showBackToTop?(u.n.debug("[BackToTop] showBackToTop, scrollTop: "+o),t.setState({"showBackToTop":!0})):t.state.showBackToTop&&o<=300&&(u.n.debug("[BackToTop] hideBackToTop, scrollTop: "+o),t.setState({"showBackToTop":!1})))},70),t.state=f({},t.state,{"scrollTop":null,"showBackToTop":!1}),t}return function withBackToTop_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WithBackToTopComponent,e),WithBackToTopComponent}()}n.d(t,"b",function(){return withLogin}),n.d(t,"c",function(){return withPager}),n.d(t,"a",function(){return withBackToTop})},"602":function(e,t,n){},"604":function(e,t,n){},"821":function(e,t,n){"use strict";n.r(t);var o,r,a,i=n(3),c=n(4),s=n(747),u=n(748),l=n(353),p=n(351),f=n(347),h=n(21),_=n(767),g=n(362),m=n(376),d=n(462),y=n(13),k=n(16),b=n(15),v=n(51),P=(n(602),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var w,O=Object(v.b)(function(e){return{"cart":e.cart}},function(e){return{"onUpdateCartCount":function onUpdateCartCount(t){return e({"type":"cart/updateCount","payload":t})}}})((a=r=function(e){function PackageItem(e){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PackageItem);var n=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(PackageItem.__proto__||Object.getPrototypeOf(PackageItem)).call(this,e));return n.handlePackageClick=function(e){var t=n.props.current;n.state.selection;t!==e&&n.setState({"selection":new Set}),n.props.onClick()},n.handleSelectionChange=function(e,t){var o=n.state.selection;e.checked_spec||!e.spec_items.length?(o[t?"add":"delete"](e.checked_spec&&e.checked_spec.item_id||e.item_id),n.setState({"selection":new Set(o)},function(){n.countPackageTotal()})):n.showBuyPanel(e,!0)},n.handleSkuSelection=function(e){n.showBuyPanel(e)},n.showBuyPanel=function(e,t){console.log(!!t);n.state.curSku;n.setState({"curSku":e,"curId":e.item_id,"showBuyPanel":!0,"buyPanelType":"pick","fromCheck":!!t})},n.handleSpecSubmit=function(e){var t=n.state,o=t.curId,r=t.fromCheck,a=n.state.list,i=a.findIndex(function(e){return e.item_id===o}),c=null;a[i].checked_spec&&(c=a[i].checked_spec.item_id),Object.assign(a[i],{"checked_spec":e}),n.setState({"list":a,"showBuyPanel":!1});var s=n.state.selection,u=[].concat(_toConsumableArray(s)).find(function(e){return e===c});u&&(s.delete(u,e.item_id),s.add(e.item_id),n.setState({"selection":new Set(s)},function(){n.countPackageTotal()})),r&&![].concat(_toConsumableArray(s)).find(function(t){return e.item_id===t})&&(s.add(e.item_id),n.setState({"selection":new Set(s)},function(){n.countPackageTotal()}))},n.handleAddCart=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,o,r,a,i,c,s;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(k.a.getAuthToken()){t.next=4;break}return Object(f.d)({"title":"请先登录再购买","icon":"none"}),setTimeout(function(){k.a.login(n)},2e3),t.abrupt("return");case 4:return e=n.state,o=e.selection,r=e.mainItem,a=n.props.current,i=Object(h.b)("curStore"),c=i.distributor_id,s={"isAccumulate":!1,"item_id":r.id,"items_id":[].concat(_toConsumableArray(o)),"num":1,"shop_type":"distributor","activity_id":a,"activity_type":"package","distributor_id":c},t.next=10,b.a.cart.add(s);case 10:t.sent&&(Object(f.d)({"title":"成功加入购物车","icon":"success"}),n.fetchCartcount());case 12:case"end":return t.stop()}},_callee,t)})),n.state={"list":[],"mainItem":{},"buyPanelType":null,"showBuyPanel":!1,"packageTotalPrice":0,"curSku":null,"curId":null,"fromCheck":!1,"packagePrices":null,"selection":new Set},n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(PackageItem,c["a"].Component),P(PackageItem,[{"key":"componentDidMount","value":function componentDidMount(){this.fetch()}},{"key":"fetch","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,n,o,r,a,i;return regeneratorRuntime.wrap(function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:return e=this.props.info.package_id,c.next=3,b.a.item.packageDetail(e);case 3:t=c.sent,n=t.itemLists,o=t.main_item_id,r=t.main_item_price,a=t.package_price,i=Object(y.q)(n,{"img":"pics[0]","item_id":"item_id","title":"itemName","desc":"brief","pics":"pics","spec_items":"spec_items","item_spec_desc":"item_spec_desc","checked_spec":null,"price":function price(e){return(e.package_price/100).toFixed(2)},"market_price":function market_price(e){return(e.price/100).toFixed(2)}}),this.setState({"list":i,"packagePrices":a,"mainItem":{"id":o,"price":r}});case 10:case"end":return c.stop()}},_callee2,this)}));return function fetch(){return e.apply(this,arguments)}}()},{"key":"fetchCartcount","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e,t;return regeneratorRuntime.wrap(function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.cart.count({"shop_type":"distributor"});case 3:e=n.sent,t=e.item_count,this.props.onUpdateCartCount(t),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:case"end":return n.stop()}},_callee3,this,[[0,8]])}));return function fetchCartcount(){return e.apply(this,arguments)}}()},{"key":"countPackageTotal","value":function countPackageTotal(){var e=this.state,t=e.selection,n=e.packagePrices,o=e.mainItem,r=0,a=[].concat(_toConsumableArray(t));a.length&&(r+=Number(o.price),a.map(function(e){r+=Number(n[e])})),this.setState({"packageTotalPrice":(r/100).toFixed(2)})}},{"key":"render","value":function render(){var e=this,t=this.props,n=t.info,o=(t.onClick,t.current);if(!n)return null;var r=this.state,a=r.list,c=r.selection,l=(r.packagePrice,n.package_id),f=n.package_name;return i.l.createElement(s.a,null,i.l.createElement(_.a,{"open":o===l,"onClick":this.handlePackageClick.bind(this,l),"isAnimation":!1,"title":f},i.l.createElement(s.a,{"className":"package-goods__list"},a.map(function(t){return i.l.createElement(p.i,{"img-class":"package-goods__item","showFav":!1,"showSku":!0,"key":t.item_id,"info":t,"renderCheckbox":i.l.createElement(s.a,{"className":"cart-item__act"},i.l.createElement(p.q,{"key":t.item_id,"checked":c.has(t.checked_spec&&t.checked_spec.item_id||t.item_id),"onChange":e.handleSelectionChange.bind(e,t)})),"renderSpec":i.l.createElement(s.a,{"className":"goods-item__sku","style":t.spec_items.length?"":"display: none;","onClick":e.handleSkuSelection.bind(e,t)},i.l.createElement(m.a,{"className":"goods-item__sku-text"},t.checked_spec?t.checked_spec.propsText:"请选择规格"),i.l.createElement(m.a,{"className":"icon-arrowDown"}))})})),i.l.createElement(s.a,{"class":"package-goods__item-footer"},i.l.createElement(s.a,{"className":"package-amount"},"组合价：",i.l.createElement(m.a,{"className":"amount-number"},"¥",packageTotalPrice)),i.l.createElement(g.a,{"type":"primary","className":"package-add-cart","size":"small","onClick":this.handleAddCart.bind(this)},"加入购物车")),curSku&&showBuyPanel&&i.l.createElement(p.h,{"info":curSku,"type":buyPanelType,"isOpened":showBuyPanel,"onClose":function onClose(){return e.setState({"showBuyPanel":!1})},"onSubmit":this.handleSpecSubmit.bind(this)})),o!==l&&i.l.createElement(u.a,{"className":"package-goods__thumbnails","scrollX":!0,"scrollWithAnimation":!0},a.map(function(e){return i.l.createElement(d.a,{"key":e.index,"className":"package-goods__thumbnails-img","mode":"aspectFix","src":e.pics[0]})})))}}]),PackageItem}(),r.options={"addGlobalClass":!0},r.defaultProps={},o=a))||o,T=(n(604),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),L=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),C=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0};function package_list_toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.default=Object(l.c)(w=Object(l.a)(w=function(e){function PackageList(e){!function package_list_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PackageList);var t=function package_list_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(PackageList.__proto__||Object.getPrototypeOf(PackageList)).call(this,e));return t.config={"navigationBarTitleText":"优惠组合"},t.handleItemClick=function(e){t.setState({"currentPackage":e})},t.state=T({},t.state,{"currentPackage":0,"list":[]}),t}return function package_list_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(PackageList,c["a"].Component),L(PackageList,[{"key":"componentDidMount","value":function componentDidMount(){this.nextPage()}},{"key":"fetch","value":function(){var e=function package_list_asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(e){var t,n,o,r,a,i,c,s,u;return regeneratorRuntime.wrap(function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return t=e.page_no,n=e.page_size,o=this.$router.params.id,r=this.state.currentPackage,a={"item_id":o,"page":t,"pageSize":n},l.next=6,b.a.item.packageList(a);case 6:return i=l.sent,c=i.list,s=i.total_count,c.length&&(u=Object(y.q)(c,{"package_id":"package_id","package_name":"package_name","open":!1}),this.setState({"list":[].concat(package_list_toConsumableArray(this.state.list),package_list_toConsumableArray(u))}),r||this.setState({"currentPackage":u[0].package_id})),l.abrupt("return",{"total":s});case 11:case"end":return l.stop()}},_callee,this)}));return function fetch(t){return e.apply(this,arguments)}}()},{"key":"render","value":function render(){var e=this,t=this.state,n=t.list,o=t.showBackToTop,r=t.scrollTop,a=t.page,c=t.currentPackage;t.buyPanelType;return i.l.createElement(s.a,{"className":"page-package-goods"},i.l.createElement(u.a,{"className":"package-goods__scroll","scrollY":!0,"scrollTop":r,"scrollWithAnimation":!0,"onScroll":this.handleScroll,"onScrollToLower":this.nextPage},i.l.createElement(s.a,{"className":"package-goods__list"},n.map(function(t){return i.l.createElement(s.a,{"className":"package-goods__item","key":t.package_id},i.l.createElement(O,{"info":t,"current":c,"onClick":e.handleItemClick.bind(e,t.package_id)}))}),a.isLoading?i.l.createElement(p.j,null,"正在加载..."):null,!a.isLoading&&!a.hasNext&&!n.length&&i.l.createElement(p.s,{"img":"trades_empty.png"},"活动已结束~"))),i.l.createElement(p.b,{"show":o,"onClick":this.scrollBackToTop}))}},{"key":"componentDidShow","value":function componentDidShow(){C(PackageList.prototype.__proto__||Object.getPrototypeOf(PackageList.prototype),"componentDidShow",this)&&C(PackageList.prototype.__proto__||Object.getPrototypeOf(PackageList.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){C(PackageList.prototype.__proto__||Object.getPrototypeOf(PackageList.prototype),"componentDidHide",this)&&C(PackageList.prototype.__proto__||Object.getPrototypeOf(PackageList.prototype),"componentDidHide",this).call(this)}}]),PackageList}())||w)||w}}]);