(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"368":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o,r,a=n(3),i=n(4),s=n(472),c=n(5),u=n(906),l=(n(377),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var p=(r=o=function(e){function NavGap(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,NavGap);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(NavGap.__proto__||Object.getPrototypeOf(NavGap)).call(this,e));return t.handleIconClick=function(){console.log("kakakakk"),i.a.navigateBack()},t.props=e,t.state={"showIcon":!1,"navBar":0},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(NavGap,i["a"].Component),l(NavGap,[{"key":"componentDidMount","value":function componentDidMount(){var e=i.a.getCurrentPages(),t=null;try{t=Object(s.b)(),this.setState({"navBar":t.statusBarHeight})}catch(e){console.log(e)}this.setState({"showIcon":!/(index|category\/index|recommend\/list|cart\/espier-index|member\/index)(.)*/.test(e[e.length-1].route)})}},{"key":"render","value":function render(){var e=this.props,t=e.title,n=(e.home,this.state.showIcon),o=Object(c.b)("top");return a.l.createElement(u.a,{"className":"nav-gap-container","style":{"background":this.props.bg?this.props.bg:"","color":this.props.cl?this.props.cl:"black"}},a.l.createElement(u.a,{"className":"iconfont icon-arrow-left","onClick":this.handleIconClick.bind(this),"style":{"top":o+"px","display":n?"block":"none"}}),a.l.createElement(u.a,{"style":{"top":o+"px"},"className":"gap-title"},t))}}]),NavGap}(),o.options={"addGlobalClass":!0},r)},"377":function(e,t,n){},"480":function(e,t,n){"use strict";var o=n(3),r=n(50),a=n.n(r),i=n(361),s=n.n(i),c=n(906),u=n(546),l=n(907),p=n(4),f=n(360),h=n(367),d=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();Object(h.c)();var b=function(e){function AtLoading(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtLoading),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtLoading.__proto__||Object.getPrototypeOf(AtLoading)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtLoading,f["a"]),d(AtLoading,[{"key":"render","value":function render(){var e=this.props,t=e.color,n=e.size,r="string"==typeof n?n:String(n),a={"width":n?""+p.a.pxTransform(parseInt(r)):"","height":n?""+p.a.pxTransform(parseInt(r)):""},i={"border":t?"1px solid "+t:"","border-color":t?t+" transparent transparent transparent":""},s=Object.assign({},i,a);return o.l.createElement(c.a,{"className":"at-loading","style":a},o.l.createElement(c.a,{"className":"at-loading__ring","style":s}),o.l.createElement(c.a,{"className":"at-loading__ring","style":s}),o.l.createElement(c.a,{"className":"at-loading__ring","style":s}))}}]),AtLoading}();b.defaultProps={"size":0,"color":""},b.propTypes={"size":s.a.oneOfType([s.a.string,s.a.number]),"color":s.a.oneOfType([s.a.string,s.a.number])},n.d(t,"a",function(){return _});var m=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}var y={"normal":"normal","small":"small"},g={"primary":"primary","secondary":"secondary"},_=function(e){function AtButton(e){!function button_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtButton);var t=function button_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtButton.__proto__||Object.getPrototypeOf(AtButton)).call(this,e));return t.state={"isWEB":p.a.getEnv()===p.a.ENV_TYPE.WEB,"isWEAPP":p.a.getEnv()===p.a.ENV_TYPE.WEAPP,"isALIPAY":p.a.getEnv()===p.a.ENV_TYPE.ALIPAY},t}return function button_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtButton,f["a"]),m(AtButton,[{"key":"onClick","value":function onClick(e){this.props.disabled||this.props.onClick&&this.props.onClick(e)}},{"key":"onGetUserInfo","value":function onGetUserInfo(e){this.props.onGetUserInfo&&this.props.onGetUserInfo(e)}},{"key":"onContact","value":function onContact(e){this.props.onContact&&this.props.onContact(e)}},{"key":"onGetPhoneNumber","value":function onGetPhoneNumber(e){this.props.onGetPhoneNumber&&this.props.onGetPhoneNumber(e)}},{"key":"onError","value":function onError(e){this.props.onError&&this.props.onError(e)}},{"key":"onOpenSetting","value":function onOpenSetting(e){this.props.onOpenSetting&&this.props.onOpenSetting(e)}},{"key":"onSumit","value":function onSumit(e){(this.state.isWEAPP||this.state.isWEB)&&this.$scope.triggerEvent("submit",e.detail,{"bubbles":!0,"composed":!0})}},{"key":"onReset","value":function onReset(e){(this.state.isWEAPP||this.state.isWEB)&&this.$scope.triggerEvent("reset",e.detail,{"bubbles":!0,"composed":!0})}},{"key":"render","value":function render(){var e,t=this.props,n=t.size,r=void 0===n?"normal":n,i=t.type,s=void 0===i?"":i,p=t.circle,f=t.full,h=t.loading,d=t.disabled,m=t.customStyle,_=t.formType,v=t.openType,P=t.lang,O=t.sessionFrom,w=t.sendMessageTitle,k=t.sendMessagePath,E=t.sendMessageImg,C=t.showMessageCard,x=t.appParameter,j=this.state,A=j.isWEAPP,T=j.isALIPAY,I=j.isWEB,N=["at-button"],S=(_defineProperty(e={},"at-button--"+y[r],y[r]),_defineProperty(e,"at-button--disabled",d),_defineProperty(e,"at-button--"+s,g[s]),_defineProperty(e,"at-button--circle",p),_defineProperty(e,"at-button--full",f),e),G="primary"===s?"#fff":"",W="small"===r?"30":0,R=null;h&&(R=o.l.createElement(c.a,{"className":"at-button__icon"},o.l.createElement(b,{"color":G,"size":W})),N.push("at-button--icon"));var M=o.l.createElement(u.a,{"className":"at-button__wxbutton","lang":P,"formType":"submit"===_||"reset"===_?_:void 0}),B=o.l.createElement(u.a,{"className":"at-button__wxbutton","formType":_,"openType":v,"lang":P,"sessionFrom":O,"sendMessageTitle":w,"sendMessagePath":k,"sendMessageImg":E,"showMessageCard":C,"appParameter":x,"onGetUserInfo":this.onGetUserInfo.bind(this),"onGetPhoneNumber":this.onGetPhoneNumber.bind(this),"onOpenSetting":this.onOpenSetting.bind(this),"onError":this.onError.bind(this),"onContact":this.onContact.bind(this)});return o.l.createElement(c.a,{"className":a()(N,S,this.props.className),"style":m,"onClick":this.onClick.bind(this)},I&&!d&&M,A&&!d&&o.l.createElement(l.a,{"onSubmit":this.onSumit.bind(this),"onReset":this.onReset.bind(this)},B),T&&!d&&B,R,o.l.createElement(c.a,{"className":"at-button__text"},this.props.children))}}]),AtButton}();_.defaultProps={"size":"normal","type":void 0,"circle":!1,"full":!1,"loading":!1,"disabled":!1,"customStyle":{},"onClick":function onClick(){},"formType":void 0,"openType":void 0,"lang":"en","sessionFrom":"","sendMessageTitle":"","sendMessagePath":"","sendMessageImg":"","showMessageCard":!1,"appParameter":"","onGetUserInfo":function onGetUserInfo(){},"onContact":function onContact(){},"onGetPhoneNumber":function onGetPhoneNumber(){},"onError":function onError(){},"onOpenSetting":function onOpenSetting(){}},_.propTypes={"size":s.a.oneOf(["normal","small"]),"type":s.a.oneOf(["primary","secondary",""]),"circle":s.a.bool,"full":s.a.bool,"loading":s.a.bool,"disabled":s.a.bool,"onClick":s.a.func,"customStyle":s.a.oneOfType([s.a.object,s.a.string]),"formType":s.a.oneOf(["submit","reset",""]),"openType":s.a.oneOf(["contact","share","getUserInfo","getPhoneNumber","launchApp","openSetting","feedback","getRealnameAuthInfo","getAuthorize","contactShare",""]),"lang":s.a.string,"sessionFrom":s.a.string,"sendMessageTitle":s.a.string,"sendMessagePath":s.a.string,"sendMessageImg":s.a.string,"showMessageCard":s.a.bool,"appParameter":s.a.string,"onGetUserInfo":s.a.func,"onContact":s.a.func,"onGetPhoneNumber":s.a.func,"onError":s.a.func,"onOpenSetting":s.a.func}},"727":function(e,t,n){},"924":function(e,t,n){"use strict";n.r(t);var o,r=n(3),a=n(358),i=n(357),s=n(5),c=n(4),u=n(906),l=n(474),p=n(51),f=n(480),h=n(9),d=n(17),b=n(368),m=(n(727),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}()),y=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=Object(p.b)(function(e){return{"colors":e.colors.current}})(o=function(e){function WxAuth(){var e,t,n,o,r=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WxAuth);for(var u=arguments.length,l=Array(u),p=0;p<u;p++)l[p]=arguments[p];return t=n=_possibleConstructorReturn(this,(e=WxAuth.__proto__||Object.getPrototypeOf(WxAuth)).call.apply(e,[this].concat(l))),n.state={"isAuthShow":!1},n.handleNews=function(){n.handleGetUserInfo()},n.handleGetUserInfo=(o=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,o,u,l,p,f,b,m,y,g,_,v,P,O,w,k;return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.detail,o=t.iv,u=t.encryptedData,l=t.rawData,p=t.signature,f=t.userInfo,o&&u){r.next=5;break}return Object(a.d)({"title":"授权提示","content":"需要您的授权才能购物","showCancel":!1,"confirmText":"知道啦"}),r.abrupt("return");case 5:return r.next=7,Object(i.h)();case 7:return b=r.sent,m=b.code,Object(a.c)({"mask":!0,"title":"正在加载..."}),r.prev=10,y=Object(s.b)("distribution_shop_id"),g={"code":m,"iv":o,"encryptedData":u,"rawData":l,"signature":p,"userInfo":f},(_=Object(s.b)("trackParams"))&&Object.assign(g,{"source_id":_.source_id,"monitor_id":_.monitor_id}),y&&Object.assign(g,{"inviter_id":y}),r.next=18,h.a.wx.prelogin(g);case 18:if(v=r.sent,P=v.token,O=v.open_id,w=v.union_id,k=v.user_id,1!=n.$router.params.update){r.next=27;break}return Object(a.e)({"title":"微信信息同步会有几个小时的时间差,请稍后再试","icon":"none","duration":1500}),setTimeout(function(){c.a.navigateTo({"url":"/pages/member/index"})},2500),r.abrupt("return");case 27:if(d.a.setAuthToken(P),!k){r.next=32;break}return r.next=31,n.autoLogin();case 31:return r.abrupt("return");case 32:c.a.redirectTo({"url":"/pages/auth/reg?code="+m+"&open_id="+O+"&union_id="+w}),r.next=39;break;case 35:r.prev=35,r.t0=r.catch(10),console.info(r.t0),Object(a.e)({"title":"授权失败，请稍后再试","icon":"none"});case 39:Object(a.a)();case 40:case"end":return r.stop()}},_callee,r,[[10,35]])})),function(e){return o.apply(this,arguments)}),n.handleBackHome=function(){c.a.navigateBack()},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WxAuth,c["a"].Component),m(WxAuth,[{"key":"componentDidMount","value":function componentDidMount(){this.autoLogin()}},{"key":"autoLogin","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,n,o,r;return regeneratorRuntime.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return e=this.$router.params.update,a.next=3,Object(i.h)();case 3:return t=a.sent,n=t.code,a.prev=5,a.next=8,h.a.wx.login({"code":n});case 8:if(o=a.sent,r=o.token){a.next=12;break}throw new Error("token is not defined: "+r);case 12:if(d.a.setAuthToken(r),1!=e){a.next=16;break}return this.setState({"isAuthShow":!0}),a.abrupt("return");case 16:return a.abrupt("return",this.redirect());case 19:a.prev=19,a.t0=a.catch(5),this.setState({"isAuthShow":!0}),console.log(a.t0);case 23:case"end":return a.stop()}},_callee2,this,[[5,19]])}));return function autoLogin(){return e.apply(this,arguments)}}()},{"key":"redirect","value":function redirect(){var redirect=this.$router.params.redirect;c.a.M(decodeURIComponent(redirect));var e="";"true"===Object(s.b)("isqrcode")?e=redirect?decodeURIComponent(redirect):"/pages/qrcode-buy":Object(s.b)("help")?c.a.redirectTo({"url":"/others/pages/help/help"}):e=redirect?decodeURIComponent(redirect):"/pages/member/index",h.a.member.memberInfo().then(function(t){Object(s.f)("userinfo",{"username":t.memberInfo.username,"avatar":t.memberInfo.avatar,"userId":t.memberInfo.user_id,"user_card_code":t.memberInfo.user_card_code,"inviter_id":t.memberInfo.inviter_id,"is_vip":t.vipgrade.is_vip,"vip_grade":t.vipgrade.vip_grade_id}),c.a.redirectTo({"url":e})})}},{"key":"render","value":function render(){var e=this.props.colors,t=this.state.isAuthShow;return r.l.createElement(u.a,null,r.l.createElement(b.a,{"title":"授权"}),r.l.createElement(u.a,{"className":"page-wxauth"},t&&r.l.createElement(u.a,{"className":"sec-auth"},r.l.createElement(u.a,{"className":"auth-title"},"用户授权"),r.l.createElement(l.a,{"className":"auth-hint"},{}.wxa_name,"申请获得你的公开信息（昵称、头像等）"),r.l.createElement(u.a,{"className":"auth-btns"},r.l.createElement(f.a,{"type":"primary","lang":"zh_CN","customStyle":"background: "+e.data[0].primary+"; border-color: "+e.data[0].primary,"openType":"getUserInfo","onClick":this.handleNews.bind(this),"onGetUserInfo":this.handleGetUserInfo},"授权允许"),r.l.createElement(f.a,{"className":"back-btn","type":"default","onClick":this.handleBackHome.bind(this)},"拒绝")))))}},{"key":"componentDidShow","value":function componentDidShow(){y(WxAuth.prototype.__proto__||Object.getPrototypeOf(WxAuth.prototype),"componentDidShow",this)&&y(WxAuth.prototype.__proto__||Object.getPrototypeOf(WxAuth.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){y(WxAuth.prototype.__proto__||Object.getPrototypeOf(WxAuth.prototype),"componentDidHide",this)&&y(WxAuth.prototype.__proto__||Object.getPrototypeOf(WxAuth.prototype),"componentDidHide",this).call(this)}}]),WxAuth}())||o}}]);