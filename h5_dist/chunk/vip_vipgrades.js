(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{"356":function(e,t,n){"use strict";n.d(t,"a",function(){return delayQuerySelector}),n.d(t,"e",function(){return uuid}),n.d(t,"c",function(){return initTestEnv}),n.d(t,"d",function(){return isTest}),n.d(t,"b",function(){return handleTouchScroll});var r=n(4),a=n(363),o=r.a.getEnv();function delay(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return new Promise(function(t){[r.a.ENV_TYPE.WEB,r.a.ENV_TYPE.SWAN].includes(o)?setTimeout(function(){t()},e):t()})}function delayQuerySelector(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,i=o===r.a.ENV_TYPE.WEB?e:e.$scope,c=Object(a.a)().in(i);return new Promise(function(e){delay(n).then(function(){c.select(t).boundingClientRect().exec(function(t){e(t)})})})}function uuid(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[],a=0;if(t=t||n.length,e)for(a=0;a<e;a++)r[a]=n[0|Math.random()*t];else{var o=void 0;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",a=0;a<36;a++)r[a]||(o=0|16*Math.random(),r[a]=n[19===a?3&o|8:o])}return r.join("")}function initTestEnv(){0}function isTest(){return!1}var i=0;function handleTouchScroll(e){o===r.a.ENV_TYPE.WEB&&(e?(i=document.documentElement.scrollTop,document.body.classList.add("at-frozen"),document.body.style.top=-i+"px"):(document.body.style.top=null,document.body.classList.remove("at-frozen"),document.documentElement.scrollTop=i))}},"363":function(e,t,n){"use strict";n.d(t,"a",function(){return createSelectorQuery});var r=n(3),a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function filter(e,t,n){if(!t)return null;var r=e.id,a=e.dataset,o=e.rect,i=e.size,c=e.scrollOffset,s=e.properties,l=void 0===s?[]:s,u=e.computedStyle,p=void 0===u?[]:u,f=t.getBoundingClientRect(),h=f.left,d=f.right,m=f.top,b=f.bottom,y=f.width,v=f.height,_="html"===n,g={};if(r&&(g.id=t.id),a&&(g.dataset=Object.assign({},t.dataset)),o&&(_?(g.left=0,g.right=0,g.top=0,g.bottom=0):(g.left=h,g.right=d,g.top=m,g.bottom=b)),i&&(_?(g.width=t.clientWidth,g.height=t.clientHeight):(g.width=y,g.height=v)),c&&(g.scrollLeft=t.scrollLeft,g.scrollTop=t.scrollTop),l.length&&l.forEach(function(e){var n=t.getAttribute(e);n&&(g[e]=n)}),p.length){var T=window.getComputedStyle(t);p.forEach(function(e){var t=T.getPropertyValue(e);t&&(g[e]=t)})}return g}var o=function(){function Query(){_classCallCheck(this,Query),this._defaultWebviewId=null,this._webviewId=null,this._queue=[],this._queueCb=[],this._component=null}return a(Query,[{"key":"in","value":function _in(e){return this._component=e,this}},{"key":"select","value":function select(e){return"string"==typeof e&&(e=e.replace(">>>",">")),new i(e,this,!0)}},{"key":"selectAll","value":function selectAll(e){return"string"==typeof e&&(e=e.replace(">>>",">")),new i(e,this,!1)}},{"key":"selectViewport","value":function selectViewport(){return new i("html",this,!0)}},{"key":"exec","value":function exec(e){var t=this;!function queryBat(e,t){var n=[];e.forEach(function(e){var t=e.selector,a=e.single,o=e.fields,i=e.component,c=null!==i&&r.l.findDOMNode(i)||document,s=!1;if(c!==document)for(var l=c.parentNode.querySelectorAll(t),u=0,p=l.length;u<p;++u)if(c===l[u]){s=!0;break}if(a){var f=!0===s?c:c.querySelector(t);n.push(filter(o,f,t))}else{var h=c.querySelectorAll(t),d=[];!0===s&&d.push(c);for(var m=0,b=h.length;m<b;++m)d.push(h[m]);n.push(d.map(function(e){return filter(o,e)}))}}),t(n)}(this._queue,function(n){var r=t._queueCb;n.forEach(function(e,n){"function"==typeof r[n]&&r[n].call(t,e)}),"function"==typeof e&&e.call(t,n)})}},{"key":"_push","value":function _push(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._queue.push({"component":t,"selector":e,"single":n,"fields":r}),this._queueCb.push(a)}}]),Query}(),i=function(){function NodesRef(e,t,n){_classCallCheck(this,NodesRef),this._component=t._component,this._selector=e,this._selectorQuery=t,this._single=n}return a(NodesRef,[{"key":"boundingClientRect","value":function boundingClientRect(e){var t=this._selector,n=this._component,r=this._single,a=this._selectorQuery;return a._push(t,n,r,{"id":!0,"dataset":!0,"rect":!0,"size":!0},e),a}},{"key":"scrollOffset","value":function scrollOffset(e){var t=this._selector,n=this._component,r=this._single,a=this._selectorQuery;return a._push(t,n,r,{"id":!0,"dataset":!0,"scrollOffset":!0},e),a}},{"key":"fields","value":function fields(e,t){var n=this._selector,r=this._component,a=this._single,o=this._selectorQuery,i=e.id,c=e.dataset,s=e.rect,l=e.size,u=e.scrollOffset,p=e.properties,f=void 0===p?[]:p,h=e.computedStyle,d=void 0===h?[]:h;return o._push(n,r,a,{"id":i,"dataset":c,"rect":s,"size":l,"scrollOffset":u,"properties":f,"computedStyle":d},t),o}}]),NodesRef}();function createSelectorQuery(){return new o}},"448":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(3),a=n(4),o=n(747),i=n(748),c=n(350),s=n.n(c),l=n(49),u=n.n(l),p=n(356),f=n(349),h=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}var d=a.a.getEnv(),m=function(e){function AtTabs(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtTabs);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtTabs.__proto__||Object.getPrototypeOf(AtTabs)).apply(this,arguments));return e.updateState=function(t){if(e.props.scroll)switch(d){case a.a.ENV_TYPE.WEAPP:case a.a.ENV_TYPE.ALIPAY:case a.a.ENV_TYPE.SWAN:var n=Math.max(t-1,0);e.setState({"_scrollIntoView":"tab"+n});break;case a.a.ENV_TYPE.WEB:var r=Math.max(t-1,0),o=e.tabHeaderRef.childNodes[r];o&&e.setState({"_scrollTop":o.offsetTop,"_scrollLeft":o.offsetLeft});break;default:console.warn("AtTab 组件在该环境还未适配")}},e.state={"_scrollLeft":"","_scrollTop":"","_scrollIntoView":""},e._tabId=Object(p.d)()?"tabs-AOTU2018":Object(p.e)(),e._touchDot=0,e._timer=null,e._interval=0,e._isMoving=!1,e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtTabs,f["a"]),h(AtTabs,[{"key":"handleClick","value":function handleClick(){var e;(e=this.props).onClick.apply(e,arguments)}},{"key":"handleTouchStart","value":function handleTouchStart(e){var t=this,n=this.props,r=n.swipeable,a=n.tabDirection;r&&"vertical"!==a&&(this._touchDot=e.touches[0].pageX,this._timer=setInterval(function(){t._interval++},100))}},{"key":"handleTouchMove","value":function handleTouchMove(e){var t=this.props,n=t.swipeable,r=t.tabDirection,a=t.current,o=t.tabList;if(n&&"vertical"!==r){var i=e.touches[0].pageX-this._touchDot,c=o.length;!this._isMoving&&this._interval<10&&this._touchDot>20&&(a+1<c&&i<=-100?(this._isMoving=!0,this.handleClick(a+1)):a-1>=0&&i>=100&&(this._isMoving=!0,this.handleClick(a-1)))}}},{"key":"handleTouchEnd","value":function handleTouchEnd(){var e=this.props,t=e.swipeable,n=e.tabDirection;t&&"vertical"!==n&&(clearInterval(this._timer),this._interval=0,this._isMoving=!1)}},{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){e.scroll!==this.props.scroll&&this.getTabHeaderRef(),e.current!==this.props.current&&this.updateState(e.current)}},{"key":"getTabHeaderRef","value":function getTabHeaderRef(){d===a.a.ENV_TYPE.WEB&&(this.tabHeaderRef=document.getElementById(this._tabId))}},{"key":"componentDidMount","value":function componentDidMount(){this.getTabHeaderRef(),this.updateState(this.props.current)}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.tabHeaderRef=null}},{"key":"render","value":function render(){var e,t=this,n=this.props,a=n.customStyle,c=n.className,s=n.height,l=n.tabDirection,p=n.animated,f=n.tabList,h=n.scroll,m=n.current,b=this.state,y=b._scrollLeft,v=b._scrollTop,_=b._scrollIntoView,g={"height":s},T={"height":"vertical"===l?100*f.length+"%":"1PX","width":"horizontal"===l?100*f.length+"%":"1PX"},w={},E="translate3d(0px, -"+100*m+"%, 0px)";"horizontal"===l&&(E="translate3d(-"+100*m+"%, 0px, 0px)"),Object.assign(w,{"transform":E,"-webkit-transform":E}),p||(w.transition="unset");var k=f.map(function(e,n){var a=u()({"at-tabs__item":!0,"at-tabs__item--active":m===n});return r.l.createElement(o.a,{"className":a,"id":"tab"+n,"key":e.title,"onClick":t.handleClick.bind(t,n)},e.title,r.l.createElement(o.a,{"className":"at-tabs__item-underline"}))}),P=u()((_defineProperty(e={"at-tabs":!0,"at-tabs--scroll":h},"at-tabs--"+l,!0),_defineProperty(e,"at-tabs--"+d,!0),e),c),O="horizontal"===l,x="vertical"===l;return r.l.createElement(o.a,{"className":P,"style":this.mergeStyle(g,a)},h?r.l.createElement(i.a,{"id":this._tabId,"className":"at-tabs__header","style":g,"scrollX":O,"scrollY":x,"scrollWithAnimation":!0,"scrollLeft":y,"scrollTop":v,"scrollIntoView":_},k):r.l.createElement(o.a,{"id":this._tabId,"className":"at-tabs__header"},k),r.l.createElement(o.a,{"className":"at-tabs__body","onTouchStart":this.handleTouchStart.bind(this),"onTouchEnd":this.handleTouchEnd.bind(this),"onTouchMove":this.handleTouchMove.bind(this),"style":this.mergeStyle(w,g)},r.l.createElement(o.a,{"className":"at-tabs__underline","style":T}),this.props.children))}}]),AtTabs}();m.defaultProps={"isTest":!1,"customStyle":"","className":"","tabDirection":"horizontal","height":"","current":0,"swipeable":!0,"scroll":!1,"animated":!0,"tabList":[],"onClick":function onClick(){}},m.propTypes={"customStyle":s.a.oneOfType([s.a.object,s.a.string]),"className":s.a.oneOfType([s.a.array,s.a.string]),"isTest":s.a.bool,"height":s.a.string,"tabDirection":s.a.oneOf(["horizontal","vertical"]),"current":s.a.number,"swipeable":s.a.bool,"scroll":s.a.bool,"animated":s.a.bool,"tabList":s.a.array,"onClick":s.a.func}},"449":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(3),a=n(747),o=n(350),i=n.n(o),c=n(49),s=n.n(c),l=n(349),u=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var p=function(e){function AtTabsPane(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtTabsPane),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtTabsPane.__proto__||Object.getPrototypeOf(AtTabsPane)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtTabsPane,l["a"]),u(AtTabsPane,[{"key":"render","value":function render(){var e=this.props,t=e.customStyle,n=e.className,o=e.tabDirection,i=e.index,c=e.current;return r.l.createElement(a.a,{"className":s()({"at-tabs-pane":!0,"at-tabs-pane--vertical":"vertical"===o,"at-tabs-pane--active":i===c,"at-tabs-pane--inactive":i!==c},n),"style":t},this.props.children)}}]),AtTabsPane}();p.defaultProps={"customStyle":"","className":"","tabDirection":"horizontal","index":0,"current":0},p.propTypes={"customStyle":i.a.oneOfType([i.a.object,i.a.string]),"className":i.a.oneOfType([i.a.array,i.a.string]),"tabDirection":i.a.oneOf(["horizontal","vertical"]),"index":i.a.number,"current":i.a.number}},"742":function(e,t,n){},"810":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return _});var r,a,o=n(3),i=n(21),c=n(347),s=n(4),l=n(747),u=n(462),p=n(456),f=n(351),h=n(448),d=n(449),m=n(15),b=n(16),y=(n(742),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}()),v=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var o=t[r](a),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var _=(a=r=function(e){function VipIndex(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,VipIndex);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(VipIndex.__proto__||Object.getPrototypeOf(VipIndex)).call(this,e));return t.componentDidShow=function(){},t.handleClickTab=function(e){t.setState({"curTabIdx":e})},t.checkHandle=function(e){t.setState({"curCellIdx":e})},t.state={"userInfo":null,"curTabIdx":0,"curCellIdx":0,"tabList":[],"list":[],"cur":null},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(VipIndex,s["a"].Component),y(VipIndex,[{"key":"componentDidMount","value":function componentDidMount(){var e=Object(i.b)("userinfo");this.setState({"userInfo":e}),this.fetchInfo(),this.fetchUserVipInfo()}},{"key":"fetchInfo","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,n,r;return regeneratorRuntime.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.vip.getList();case 2:e=a.sent,t=e.cur,n=e.list,r=n.map(function(e){return{"title":e.grade_name}}),this.setState({"tabList":r,"cur":t,"list":n});case 7:case"end":return a.stop()}},_callee,this)}));return function fetchInfo(){return e.apply(this,arguments)}}()},{"key":"handleCharge","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,n,r,a,o,s,l,u=this;return regeneratorRuntime.wrap(function _callee2$(p){for(;;)switch(p.prev=p.next){case 0:if(b.a.getAuthToken()){p.next=4;break}return Object(c.d)({"title":"请先登录再购买","icon":"none"}),setTimeout(function(){b.a.login(u)},2e3),p.abrupt("return");case 4:return e=this.state,t=e.list,n=e.curTabIdx,r=e.curCellIdx,a=t[n],o={"vip_grade_id":a.vip_grade_id,"card_type":a.price_list[r].name,"distributor_id":Object(i.b)("trackIdentity").distributor_id||""},Object(c.b)({"mask":!0}),p.next=10,m.a.vip.charge(o);case 10:s=p.sent,Object(c.a)(),l=s,this,wx.requestPayment({"timeStamp":""+l.timeStamp,"nonceStr":l.nonceStr,"package":l.package,"signType":l.signType,"paySign":l.paySign,"success":function success(e){wx.showModal({"content":"支付成功","showCancel":!1,"success":function success(e){console.log("success")}})},"fail":function fail(e){wx.showModal({"content":"支付失败","showCancel":!1})}});case 15:case"end":return p.stop()}},_callee2,this)}));return function handleCharge(){return e.apply(this,arguments)}}()},{"key":"fetchUserVipInfo","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e;return regeneratorRuntime.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.vip.getUserVipInfo();case 2:e=t.sent,this.setState({"userVipInfo":e});case 4:case"end":return t.stop()}},_callee3,this)}));return function fetchUserVipInfo(){return e.apply(this,arguments)}}()},{"key":"render","value":function render(){var e=this,t=this.state,n=t.userInfo,r=t.list,a=t.cur,i=t.curTabIdx,c=t.userVipInfo,s=t.tabList;return o.l.createElement(l.a,null,o.l.createElement(l.a,{"className":"header"},o.l.createElement(l.a,{"className":"header-isauth"},o.l.createElement(u.a,{"className":"header-isauth__avatar","src":n.avatar,"mode":"aspectFill"}),o.l.createElement(l.a,{"className":"header-isauth__info"},o.l.createElement(l.a,{"className":"nickname"},n.username,o.l.createElement(u.a,{"className":"icon-vip","src":"/assets/imgs/svip.png"})),o.l.createElement(l.a,{"className":"mcode"},c.end_time," 到期，购买后有效期将延续"))),o.l.createElement(h.a,{"className":"header-tab","current":i,"tabList":s,"onClick":this.handleClickTab},s.map(function(e,t){return o.l.createElement(d.a,{"current":i,"key":t,"index":t})}))),o.l.createElement(l.a,{"className":"section"},o.l.createElement(l.a,{"className":"section-body"},a&&a.rate&&1!=a.rate&&o.l.createElement(l.a,{"className":"text-muted"},o.l.createElement("text",{"className":"icon-info"})," 货币汇率：1",a.title," = ",a.rate,"RMB"),o.l.createElement(l.a,{"className":"grade-list"},r[i]&&r[i].price_list.map(function(t,n){return 0!=t.price&&null!=t.price&&o.l.createElement(l.a,{"className":"grade-item "+(n==curCellIdx&&"active"),"key":n,"onClick":e.checkHandle.bind(e,n)},o.l.createElement(l.a,{"className":"item-content"},o.l.createElement(l.a,{"className":"desc"},t.desc),o.l.createElement(l.a,{"className":"amount"},o.l.createElement(f.l,{"primary":!0,"value":Number(t.price)}))))})),o.l.createElement(p.a,{"className":"pay-btn","onClick":this.handleCharge},"立即支付"),o.l.createElement(l.a,{"className":"content-v-padded"},"会员权益"),o.l.createElement(l.a,{"className":"text-muted"},r[i]&&r[i].description.split("\n").map(function(e,t){return o.l.createElement(l.a,{"key":t},e)})))))}},{"key":"componentDidShow","value":function componentDidShow(){v(VipIndex.prototype.__proto__||Object.getPrototypeOf(VipIndex.prototype),"componentDidShow",this)&&v(VipIndex.prototype.__proto__||Object.getPrototypeOf(VipIndex.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){v(VipIndex.prototype.__proto__||Object.getPrototypeOf(VipIndex.prototype),"componentDidHide",this)&&v(VipIndex.prototype.__proto__||Object.getPrototypeOf(VipIndex.prototype),"componentDidHide",this).call(this)}}]),VipIndex}(),r.config={"navigationBarTitleText":"会员购买","navigationBarBackgroundColor":"#2f3030","navigationBarTextStyle":"white","backgroundColor":"#2f3030","backgroundTextStyle":"light"},a)}}]);