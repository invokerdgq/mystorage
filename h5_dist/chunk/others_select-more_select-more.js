(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{"370":function(e,t,o){"use strict";o.d(t,"a",function(){return u});var n,r,l=o(3),i=o(4),c=o(905),s=o(475),a=(o(385),function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}());var u=(r=n=function(e){function OwnTitle(e){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OwnTitle),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(OwnTitle.__proto__||Object.getPrototypeOf(OwnTitle)).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(OwnTitle,i["a"].Component),a(OwnTitle,[{"key":"render","value":function render(){var e=this.props,t=e.title,o=e.innerClass;return l.l.createElement(c.a,{"className":"title"},l.l.createElement(s.a,{"className":"line"}),l.l.createElement(s.a,{"className":o},t),l.l.createElement(s.a,{"className":"line"}))}}]),OwnTitle}(),n.defaultProps={"title":"","innerClass":""},r)},"383":function(e,t,o){var n=o(384);"string"==typeof n&&(n=[[e.i,n,""]]);var r={"sourceMap":!1,"insertAt":"top","hmr":!0,"transform":void 0,"insertInto":void 0};o(367)(n,r);n.locals&&(e.exports=n.locals)},"384":function(e,t,o){(e.exports=o(366)(!1)).push([e.i,"/*==============================\n=            colors            =\n==============================*/\n\n/*===============================\n=            z-index            =\n===============================*/\n\n/*==============================\n=            colors            =\n==============================*/\n\n/*===============================\n=            z-index            =\n===============================*/\n\n.taro-scroll {\n  -webkit-overflow-scrolling: auto;\n}\n\n.taro-scroll::-webkit-scrollbar {\n  display: none;\n}\n\n.taro-scroll-view {\n  overflow: hidden;\n}\n\n.taro-scroll-view__scroll-x {\n  overflow-x: scroll;\n  overflow-y: hidden;\n}\n\n.taro-scroll-view__scroll-y {\n  overflow-x: hidden;\n  overflow-y: scroll;\n}",""])},"385":function(e,t,o){},"460":function(e,t,o){"use strict";o(364);var n=o(3),r=o(365),l=o(50),i=o.n(l),c=(o(383),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}),s=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}();function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{"value":o,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=o,e}function easeOutScroll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments[2];if(e!==t&&"number"==typeof e){var n=t-e,r=500,l=+new Date,i=t>=e;!function step(){e=function linear(e,t,o,n){return o*e/n+t}(+new Date-l,e,n,r),i&&e>=t||!i&&t>=e?o(t):(o(e),requestAnimationFrame(step))}()}}function scrollIntoView(e){document.querySelector("#"+e).scrollIntoView({"behavior":"smooth","block":"center","inline":"start"})}function scrollVertical(e,t){var o=this;t?easeOutScroll(this._scrollTop,e,function(e){console.log("props.scrollY",o.container,o._scrollTop),o.container&&(o.container.scrollTop=e)}):this.container&&(this.container.scrollTop=e),this._scrollTop=e}function scrollHorizontal(e,t){var o=this;t?easeOutScroll(this._scrollLeft,e,function(e){o.container&&(o.container.scrollLeft=e)}):this.container&&(this.container.scrollLeft=e),this._scrollLeft=e}var a=function(e){function ScrollView(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ScrollView);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ScrollView.__proto__||Object.getPrototypeOf(ScrollView)).apply(this,arguments));return e.onTouchMove=function(e){e.stopPropagation()},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ScrollView,n["l"].Component),s(ScrollView,[{"key":"componentDidMount","value":function componentDidMount(){this.handleScroll(this.props,!0)}},{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){this.handleScroll(e)}},{"key":"handleScroll","value":function handleScroll(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.scrollIntoView&&"string"==typeof e.scrollIntoView&&document&&document.querySelector&&document.querySelector("#"+e.scrollIntoView))o?setTimeout(function(){return scrollIntoView(e.scrollIntoView)},500):scrollIntoView(e.scrollIntoView);else{var n="scrollWithAnimation"in e;e.scrollY&&"number"==typeof e.scrollTop&&e.scrollTop!==this._scrollTop&&(o?setTimeout(function(){return scrollVertical.bind(t)(e.scrollTop,n)},10):scrollVertical.bind(this)(e.scrollTop,n)),e.scrollX&&"number"==typeof e.scrollLeft&&e.scrollLeft!==this._scrollLeft&&(o?setTimeout(function(){return scrollHorizontal.bind(t)(e.scrollLeft,n)},10):scrollHorizontal.bind(this)(e.scrollLeft,n))}}},{"key":"render","value":function render(){var e,t=this,o=this.props,l=o.className,s=o.onScroll,a=o.onScrollToUpper,u=o.onScrollToLower,p=o.onTouchMove,f=o.scrollX,d=o.scrollY,h=this.props,m=h.upperThreshold,b=void 0===m?50:m,v=h.lowerThreshold,y=void 0===v?50:v,_=i()("taro-scroll",(_defineProperty(e={},"taro-scroll-view__scroll-x",f),_defineProperty(e,"taro-scroll-view__scroll-y",d),e),l);b=parseInt(b),y=parseInt(y);var w=function throttle(e,t){var o=null;return function(){for(var n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];clearTimeout(o),o=setTimeout(function(){e.apply(void 0,r)},t)}}(function uperAndLower(e){if(t.container){var o=t.container,n=o.offsetWidth,r=o.offsetHeight,l=o.scrollLeft,i=o.scrollTop,c=o.scrollHeight,s=o.scrollWidth;u&&(t.props.scrollY&&r+i+y>=c||t.props.scrollX&&n+l+y>=s)&&u(e),a&&(t.props.scrollY&&i<=b||t.props.scrollX&&l<=b)&&a(e)}},200);return n.l.createElement("div",c({"ref":function ref(e){t.container=e}},Object(r.a)(this.props,["className","scrollTop","scrollLeft"]),{"className":_,"onScroll":function _onScroll(e){var o=t.container,n=o.scrollLeft,r=o.scrollTop,l=o.scrollHeight,i=o.scrollWidth;t._scrollLeft=n,t._scrollTop=r,Object.defineProperty(e,"detail",{"enumerable":!0,"writable":!0,"value":{"scrollLeft":n,"scrollTop":r,"scrollHeight":l,"scrollWidth":i}}),w(e),s&&s(e)},"onTouchMove":function _onTouchMove(e){p?p(e):t.onTouchMove(e)},"onLoad":function onLoad(e){console.log("onload",e)}}),this.props.children)}}]),ScrollView}();t.a=a},"471":function(e,t,o){var n=o(472);"string"==typeof n&&(n=[[e.i,n,""]]);var r={"sourceMap":!1,"insertAt":"top","hmr":!0,"transform":void 0,"insertInto":void 0};o(367)(n,r);n.locals&&(e.exports=n.locals)},"472":function(e,t,o){(e.exports=o(366)(!1)).push([e.i,"/*==============================\n=            colors            =\n==============================*/\n\n/*===============================\n=            z-index            =\n===============================*/\n\n/*==============================\n=            colors            =\n==============================*/\n\n/*===============================\n=            z-index            =\n===============================*/\n\n.taro-text {\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.taro-text__selectable {\n  -moz-user-select: text;\n  -webkit-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n}",""])},"475":function(e,t,o){"use strict";o(364);var n=o(3),r=o(365),l=o(50),i=o.n(l),c=(o(471),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}),s=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}();var a=function(e){function Text(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Text),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Text.__proto__||Object.getPrototypeOf(Text)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Text,n["l"].Component),s(Text,[{"key":"render","value":function render(){var e=this.props,t=e.className,o=e.selectable,l=void 0!==o&&o,s=i()("taro-text",{"taro-text__selectable":l},t);return n.l.createElement("span",c({},Object(r.a)(this.props,["selectable","className"]),{"className":s}),this.props.children)}}]),Text}();t.a=a},"542":function(e,t,o){"use strict";o.d(t,"a",function(){return f});var n,r,l=o(3),i=o(359),c=o(4),s=o(905),a=o(904),u=o(34),p=(o(543),function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}());var f=(r=n=function(e){function OwnGoodsItem(e){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OwnGoodsItem),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(OwnGoodsItem.__proto__||Object.getPrototypeOf(OwnGoodsItem)).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(OwnGoodsItem,c["a"].Component),p(OwnGoodsItem,[{"key":"handleClick","value":function handleClick(){this.props.disabled?Object(i.e)({"title":"已售完","icon":"none","duration":1500}):this.props.onclick()}},{"key":"render","value":function render(){var e=this.props.info,t=e.item_pic,o=e.item_title,n=this.props,r=n.type,i=n.disabled,c=n.price;return l.l.createElement(s.a,{"className":"activity-item"},l.l.createElement(a.a,{"className":"goods-name","src":u.d+"/goods-bg.png","mode":"widthFix"}),l.l.createElement(Text,{"className":"goods-name-text"},o),l.l.createElement(s.a,{"className":"goods-img"},l.l.createElement(a.a,{"src":t,"mode":"widthFix","className":"img"})),"buy"===r&&i&&l.l.createElement(s.a,{"className":"empty"},l.l.createElement(s.a,{"className":"opacity-bg"}),l.l.createElement(a.a,{"src":u.d+"/test.png","mode":"widthFix","className":"img"})),"buy"===r&&l.l.createElement(s.a,{"className":"help-btn","onClick":this.state.handleClick.bind(this)},l.l.createElement(a.a,{"src":i?u.d+"/disable-blank-btn.png":u.d+"/blank-btn.png","mode":"widthFix","className":"img"}),l.l.createElement(Text,{"className":"price"},c,"元抢购")))}}]),OwnGoodsItem}(),n.options={"addGlobalClass":!0},n.defaultProps={"info":{"item_pic":"","item_title":""},"onclick":function onclick(){},"type":"show","disabled":!1,"price":""},r)},"543":function(e,t,o){},"551":function(e,t,o){"use strict";o.d(t,"b",function(){return formateSelect});var n="限时秒杀";function sort(e){for(var t=0;t<e.length;t++)for(var o=t+1;o<e.length;o++)if(e[t].config.start_time>e[o].config.start_time){var n=e[t];e[t]=e[o],e[o]=n}}function formateSelect(e){var t=[];return e.forEach(function(e){var o={"level":"","list":[]};Object.keys(e).map(function(t,n){o.level=e[t].level,o.list.push(e[t])}),t.push(o)}),t}console.log(sort([{"config":{"start_time":2}},{"config":{"start_time":6}},{"config":{"start_time":1}}])),t.a=function formate(e,t){console.log("格式化 开始于---------------------"),console.log(t);var o=[],r=-1;e.map(function(e,t){e.base.title===n&&(-1===r&&(r=t),e&&o.push(e))});for(var l=function _loop(e){if(0===o[e].config.lastSeconds)o[e].config.status="ended";else{var n=o[e].config.seckillId;t.map(function(t){t.seckill_id===n&&(o[e].config.status=t.status,o[e].config.start_date=t.activity_start_date,o[e].config.end_date=t.activity_end_date,o[e].config.start_time=t.activity_start_time)})}},i=0;i<o.length;i++)l(i);var c=[],s=o.filter(function(e,t){return"ended"!==e.config.status||(c.push(e),!1)});sort(s);var a=s.filter(function(e,t){return"in_sale"!==e.config.status||(c.push(e),!1)}),u=c.concat(a);return e=e.filter(function(e){return e.base.title!==n}),u.map(function(e,t){e.data=e.data.reduce(function(e,t,o){if(0===e.length)e.push(t);else{var n=!1;e.map(function(e,o){e.title===t.title&&(n=!0)}),n||e.push(t)}return e},[])}),e.splice(r,0,{"list":u,"name":"limit-kill"}),console.log(e),console.log("格式化后  数据--------------------------"),e}},"901":function(e,t,o){},"994":function(e,t,o){"use strict";o.r(t);var n,r=o(3),l=o(905),i=o(904),c=o(460),s=o(34),a=o(5),u=o(4),p=o(542),f=o(370),d=o(9),h=(o(901),o(51)),m=o(551),b=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),v=function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,o)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(o):void 0};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}t.default=Object(h.b)(function(e){return{"step":e.step.currentStep||[]}})(n=function(e){function SelectMoreGood(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SelectMoreGood);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(SelectMoreGood.__proto__||Object.getPrototypeOf(SelectMoreGood)).call(this,e));return t.state={"showList":[],"goodsList":[]},t.top=Object(a.b)("top"),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SelectMoreGood,u["a"].Component),b(SelectMoreGood,[{"key":"componentDidMount","value":function componentDidMount(){var e=this.$router.params.level,t=void 0===e?2:e;this.setState({"currentLevel":t});var o=[];this.props.step.map(function(e){o.push(!1)}),this.setState({"showList":o}),this.fetch()}},{"key":"fetch","value":function(){var e=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,o){return function step(n,r){try{var l=t[n](r),i=l.value}catch(e){return void o(e)}if(!l.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(){var e,t;return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,d.a.assist.getGoodsList({"assist_id":this.$router.params.id});case 2:e=o.sent,t=e.list,this.setState({"goodsList":Object(m.b)(t)});case 5:case"end":return o.stop()}},_callee,this)}));return function fetch(){return e.apply(this,arguments)}}()},{"key":"back","value":function back(){u.a.navigateBack()}},{"key":"buy","value":function buy(e,t){u.a.navigateTo({"url":"/pages/item/espier-detail?id="+e.item_id+"&level="+(this.state.currentLevel-1-t)+"&assist_id="+e.assist_id})}},{"key":"showMore","value":function showMore(e){var t=[].concat(_toConsumableArray(this.state.showList));t[e]=!t[e],this.setState({"showList":t})}},{"key":"render","value":function render(){var e=this,t=this.state,o=t.currentLevel,n=t.goodsList,a=t.showList,u=void 0;this.props.step.map(function(e,t){e.level==o&&(e.price,u=t)});var d=[].concat(_toConsumableArray(n)).slice(0,u).reverse(),h=[].concat(_toConsumableArray(this.props.step)).slice(0,u).reverse();return r.l.createElement(l.a,{"className":"select"},r.l.createElement(l.a,{"className":"iconfont icon-arrow-left","style":{"top":this.top+"px"},"onClick":this.back}),r.l.createElement(l.a,{"className":"select-header"},r.l.createElement(i.a,{"mode":"widthFix","src":s.d+"/bg-header1.png","className":"img"})),r.l.createElement(l.a,{"className":"select-content"},r.l.createElement(c.a,{"scrollY":!0,"enableFlex":!0,"className":"select-scroll"},r.l.createElement(l.a,{"className":"select-scroll-list"},d.map(function(t,o){var n=[];return n=t.list.length>4&&!a[o]?[].concat(_toConsumableArray(t.list)).slice(0,4):t.list,r.l.createElement(l.a,{"className":"level-item"},r.l.createElement(f.a,{"title":h[o].price+"元购"}),r.l.createElement(l.a,{"className":"level-item-list"},n.map(function(t,n){return r.l.createElement(p.a,{"info":t,"disabled":0==t.assist_store,"type":"buy","onclick":e.buy.bind(e,t,o),"price":h[o].price})})),t.list.length>4&&r.l.createElement(l.a,{"className":"show-more","onClick":e.showMore.bind(e,o)},a[o]?"收起":"查看更多",r.l.createElement(l.a,{"className":"iconfont icon-more "+(a[o]?"rotate":"")})))}))),r.l.createElement(l.a,{"className":"select-header"},r.l.createElement(i.a,{"mode":"widthFix","src":s.d+"/bg-footer.png","className":"img"}))))}},{"key":"componentDidShow","value":function componentDidShow(){v(SelectMoreGood.prototype.__proto__||Object.getPrototypeOf(SelectMoreGood.prototype),"componentDidShow",this)&&v(SelectMoreGood.prototype.__proto__||Object.getPrototypeOf(SelectMoreGood.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){v(SelectMoreGood.prototype.__proto__||Object.getPrototypeOf(SelectMoreGood.prototype),"componentDidHide",this)&&v(SelectMoreGood.prototype.__proto__||Object.getPrototypeOf(SelectMoreGood.prototype),"componentDidHide",this).call(this)}}]),SelectMoreGood}())||n}}]);